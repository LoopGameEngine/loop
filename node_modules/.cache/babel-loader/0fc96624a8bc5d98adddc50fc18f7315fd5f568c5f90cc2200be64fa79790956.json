{"ast":null,"code":"// /src/api/googleAPI.js\n/* global gapi, google  */\n\n//const userInfoEndpoint = 'https://www.googleapis.com/oauth2/v1/userinfo';\n\nlet tokenClient;\nexport async function initGoogleAPI(CLIENT_ID, API_KEY, DISCOVERY_DOCS, SCOPES) {\n  try {\n    await new Promise((resolve, reject) => {\n      gapi.load('client', () => {\n        gapi.client.init({\n          apiKey: API_KEY,\n          clientId: \"129246923501-4lk4rkmhin21kcaoul91k300s9ar9n1t.apps.googleusercontent.com\",\n          discoveryDocs: DISCOVERY_DOCS,\n          scope: SCOPES\n        }).then(resolve).catch(reject);\n      });\n    });\n    tokenClient = google.accounts.oauth2.initTokenClient({\n      client_id: CLIENT_ID,\n      scope: SCOPES,\n      prompt: ''\n    });\n  } catch (error) {\n    console.error(`Google API initialization failed: ${error.message}`);\n  }\n}\nexport async function login() {\n  try {\n    const token = await new Promise((resolve, reject) => {\n      tokenClient.callback = response => {\n        if (response.error) {\n          reject(`Login failed: ${response.error}`);\n        } else {\n          resolve(response);\n        }\n      };\n      tokenClient.requestAccessToken({\n        prompt: 'select_account'\n      });\n    });\n    return token;\n  } catch (error) {\n    console.error(`Error during login or user info retrieval: ${error.message}`);\n  }\n}\nexport async function logout() {\n  try {\n    google.accounts.id.disableAutoSelect();\n  } catch (error) {\n    console.error(`Error during logout: ${error.message}`);\n  }\n}\nexport async function getUserInfo() {\n  try {\n    const response = await gapi.client.people.people.get({\n      resourceName: 'people/me',\n      personFields: 'emailAddresses,names'\n    });\n    console.log(response); // Verifica la estructura de la respuesta completa\n    return {\n      data: response.result,\n      error: null\n    };\n  } catch (error) {\n    console.error(`Error during user info retrieval: ${error.message}`);\n    return {\n      data: null,\n      error\n    };\n  }\n}","map":{"version":3,"names":["tokenClient","initGoogleAPI","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","Promise","resolve","reject","gapi","load","client","init","apiKey","clientId","discoveryDocs","scope","then","catch","google","accounts","oauth2","initTokenClient","client_id","prompt","error","console","message","login","token","callback","response","requestAccessToken","logout","id","disableAutoSelect","getUserInfo","people","get","resourceName","personFields","log","data","result"],"sources":["D:/xampp/htdocs/src/apis/googleAPI.js"],"sourcesContent":["// /src/api/googleAPI.js\r\n/* global gapi, google  */\r\n\r\n//const userInfoEndpoint = 'https://www.googleapis.com/oauth2/v1/userinfo';\r\n\r\nlet tokenClient;\r\n\r\nexport async function initGoogleAPI(CLIENT_ID, API_KEY, DISCOVERY_DOCS, SCOPES) {\r\n  try {\r\n    await new Promise((resolve, reject) => {\r\n      gapi.load('client', () => {\r\n        gapi.client.init({\r\n          apiKey: API_KEY,\r\n          clientId: \"129246923501-4lk4rkmhin21kcaoul91k300s9ar9n1t.apps.googleusercontent.com\",\r\n          discoveryDocs: DISCOVERY_DOCS,\r\n          scope: SCOPES\r\n        }).then(resolve).catch(reject);\r\n      });\r\n    });\r\n    tokenClient = google.accounts.oauth2.initTokenClient({\r\n      client_id: CLIENT_ID,\r\n      scope: SCOPES,\r\n      prompt: '',\r\n    });\r\n  } catch (error) {\r\n    console.error(`Google API initialization failed: ${error.message}`);\r\n  }\r\n}\r\n\r\nexport async function login() {\r\n  try {\r\n    const token = await new Promise((resolve, reject) => {\r\n      tokenClient.callback = (response) => {\r\n        if (response.error) {\r\n          reject(`Login failed: ${response.error}`);\r\n        } else {\r\n          resolve(response);\r\n        }\r\n      };\r\n      tokenClient.requestAccessToken({ prompt: 'select_account' });\r\n    });\r\n    return token;\r\n  } catch (error) {\r\n    console.error(`Error during login or user info retrieval: ${error.message}`);\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n  try {\r\n    google.accounts.id.disableAutoSelect();\r\n  } catch (error) {\r\n    console.error(`Error during logout: ${error.message}`);\r\n  }\r\n}\r\n\r\nexport async function getUserInfo() {\r\n  try {\r\n    const response = await gapi.client.people.people.get({\r\n      resourceName: 'people/me',\r\n      personFields: 'emailAddresses,names',\r\n    });\r\n    console.log(response); // Verifica la estructura de la respuesta completa\r\n    return { data: response.result, error: null };\r\n  } catch (error) {\r\n    console.error(`Error during user info retrieval: ${error.message}`);\r\n    return { data: null, error };\r\n  }\r\n}\r\n\r\n\r\n"],"mappings":"AAAA;AACA;;AAEA;;AAEA,IAAIA,WAAW;AAEf,OAAO,eAAeC,aAAaA,CAACC,SAAS,EAAEC,OAAO,EAAEC,cAAc,EAAEC,MAAM,EAAE;EAC9E,IAAI;IACF,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACrCC,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAE,MAAM;QACxBD,IAAI,CAACE,MAAM,CAACC,IAAI,CAAC;UACfC,MAAM,EAAEV,OAAO;UACfW,QAAQ,EAAE,0EAA0E;UACpFC,aAAa,EAAEX,cAAc;UAC7BY,KAAK,EAAEX;QACT,CAAC,CAAC,CAACY,IAAI,CAACV,OAAO,CAAC,CAACW,KAAK,CAACV,MAAM,CAAC;MAChC,CAAC,CAAC;IACJ,CAAC,CAAC;IACFR,WAAW,GAAGmB,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACC,eAAe,CAAC;MACnDC,SAAS,EAAErB,SAAS;MACpBc,KAAK,EAAEX,MAAM;MACbmB,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,qCAAoCA,KAAK,CAACE,OAAQ,EAAC,CAAC;EACrE;AACF;AAEA,OAAO,eAAeC,KAAKA,CAAA,EAAG;EAC5B,IAAI;IACF,MAAMC,KAAK,GAAG,MAAM,IAAIvB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACnDR,WAAW,CAAC8B,QAAQ,GAAIC,QAAQ,IAAK;QACnC,IAAIA,QAAQ,CAACN,KAAK,EAAE;UAClBjB,MAAM,CAAE,iBAAgBuB,QAAQ,CAACN,KAAM,EAAC,CAAC;QAC3C,CAAC,MAAM;UACLlB,OAAO,CAACwB,QAAQ,CAAC;QACnB;MACF,CAAC;MACD/B,WAAW,CAACgC,kBAAkB,CAAC;QAAER,MAAM,EAAE;MAAiB,CAAC,CAAC;IAC9D,CAAC,CAAC;IACF,OAAOK,KAAK;EACd,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,8CAA6CA,KAAK,CAACE,OAAQ,EAAC,CAAC;EAC9E;AACF;AAEA,OAAO,eAAeM,MAAMA,CAAA,EAAG;EAC7B,IAAI;IACFd,MAAM,CAACC,QAAQ,CAACc,EAAE,CAACC,iBAAiB,CAAC,CAAC;EACxC,CAAC,CAAC,OAAOV,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,wBAAuBA,KAAK,CAACE,OAAQ,EAAC,CAAC;EACxD;AACF;AAEA,OAAO,eAAeS,WAAWA,CAAA,EAAG;EAClC,IAAI;IACF,MAAML,QAAQ,GAAG,MAAMtB,IAAI,CAACE,MAAM,CAAC0B,MAAM,CAACA,MAAM,CAACC,GAAG,CAAC;MACnDC,YAAY,EAAE,WAAW;MACzBC,YAAY,EAAE;IAChB,CAAC,CAAC;IACFd,OAAO,CAACe,GAAG,CAACV,QAAQ,CAAC,CAAC,CAAC;IACvB,OAAO;MAAEW,IAAI,EAAEX,QAAQ,CAACY,MAAM;MAAElB,KAAK,EAAE;IAAK,CAAC;EAC/C,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,qCAAoCA,KAAK,CAACE,OAAQ,EAAC,CAAC;IACnE,OAAO;MAAEe,IAAI,EAAE,IAAI;MAAEjB;IAAM,CAAC;EAC9B;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}