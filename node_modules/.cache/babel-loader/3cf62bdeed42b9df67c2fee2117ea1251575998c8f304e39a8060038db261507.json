{"ast":null,"code":"// /src/api/googleAPI.js\n/* global gapi, google  */\n\nconst userInfoEndpoint = 'https://www.googleapis.com/oauth2/v1/userinfo';\nlet tokenClient;\nexport async function initGoogleAPI(CLIENT_ID, API_KEY, DISCOVERY_DOCS, SCOPES) {\n  try {\n    await new Promise((resolve, reject) => {\n      gapi.load('client', () => {\n        gapi.client.init({\n          apiKey: API_KEY,\n          discoveryDocs: DISCOVERY_DOCS\n        }).then(resolve).catch(reject);\n      });\n    });\n    tokenClient = google.accounts.oauth2.initTokenClient({\n      client_id: CLIENT_ID,\n      scope: SCOPES,\n      prompt: ''\n    });\n    return {\n      error: null\n    };\n  } catch (error) {\n    console.error(`Google API initialization failed: ${error.message}`);\n    return {\n      error\n    };\n  }\n}\nexport async function login() {\n  try {\n    const token = await new Promise((resolve, reject) => {\n      tokenClient.callback = response => {\n        if (response.error) {\n          reject(`Login failed: ${response.error}`);\n        } else {\n          resolve(response);\n        }\n      };\n      tokenClient.requestAccessToken({\n        prompt: 'select_account'\n      });\n    });\n    return {\n      data: token,\n      error: null\n    };\n  } catch (error) {\n    console.error(`Error during login or user info retrieval: ${error.message}`);\n    return {\n      error\n    };\n  }\n}\nexport async function logout() {\n  try {\n    google.accounts.id.disableAutoSelect();\n    return {\n      data: true,\n      error: null\n    };\n  } catch (error) {\n    console.error(`Error during logout: ${error.message}`);\n    return {\n      data: null,\n      error\n    };\n  }\n}\nexport function getUserInfo(accessToken) {\n  return fetch(userInfoEndpoint, {\n    headers: {\n      Authorization: `Bearer ${accessToken}`\n    }\n  }).then(response => response.json());\n}","map":{"version":3,"names":["userInfoEndpoint","tokenClient","initGoogleAPI","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","Promise","resolve","reject","gapi","load","client","init","apiKey","discoveryDocs","then","catch","google","accounts","oauth2","initTokenClient","client_id","scope","prompt","error","console","message","login","token","callback","response","requestAccessToken","data","logout","id","disableAutoSelect","getUserInfo","accessToken","fetch","headers","Authorization","json"],"sources":["D:/xampp/htdocs/src/apis/googleAPI.js"],"sourcesContent":["// /src/api/googleAPI.js\r\n/* global gapi, google  */\r\n\r\nconst userInfoEndpoint = 'https://www.googleapis.com/oauth2/v1/userinfo';\r\n\r\nlet tokenClient;\r\n\r\nexport async function initGoogleAPI(CLIENT_ID, API_KEY, DISCOVERY_DOCS, SCOPES) {\r\n  try {\r\n    await new Promise((resolve, reject) => {\r\n      gapi.load('client', () => {\r\n        gapi.client.init({\r\n          apiKey: API_KEY,\r\n          discoveryDocs: DISCOVERY_DOCS,\r\n        }).then(resolve).catch(reject);\r\n      });\r\n    });\r\n    tokenClient = google.accounts.oauth2.initTokenClient({\r\n      client_id: CLIENT_ID,\r\n      scope: SCOPES,\r\n      prompt: '',\r\n    });\r\n    return { error: null };\r\n  } catch (error) {\r\n    console.error(`Google API initialization failed: ${error.message}`);\r\n    return { error };\r\n  }\r\n}\r\n\r\nexport async function login() {\r\n  try {\r\n    const token = await new Promise((resolve, reject) => {\r\n      tokenClient.callback = (response) => {\r\n        if (response.error) {\r\n          reject(`Login failed: ${response.error}`);\r\n        } else {\r\n          resolve(response);\r\n        }\r\n      };\r\n      tokenClient.requestAccessToken({ prompt: 'select_account' });\r\n    });\r\n    return { data: token, error: null };\r\n  } catch (error) {\r\n    console.error(`Error during login or user info retrieval: ${error.message}`);\r\n    return { error };\r\n  }\r\n}\r\n\r\nexport async function logout() {\r\n  try {\r\n    google.accounts.id.disableAutoSelect();\r\n    return { data: true, error: null };\r\n  } catch (error) {\r\n    console.error(`Error during logout: ${error.message}`);\r\n    return { data: null, error };\r\n  }\r\n}\r\n\r\n\r\nexport function getUserInfo(accessToken) {\r\n  return fetch(userInfoEndpoint, {\r\n    headers: { Authorization: `Bearer ${accessToken}` }\r\n  })\r\n    .then(response => response.json())\r\n}\r\n\r\n\r\n"],"mappings":"AAAA;AACA;;AAEA,MAAMA,gBAAgB,GAAG,+CAA+C;AAExE,IAAIC,WAAW;AAEf,OAAO,eAAeC,aAAaA,CAACC,SAAS,EAAEC,OAAO,EAAEC,cAAc,EAAEC,MAAM,EAAE;EAC9E,IAAI;IACF,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACrCC,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAE,MAAM;QACxBD,IAAI,CAACE,MAAM,CAACC,IAAI,CAAC;UACfC,MAAM,EAAEV,OAAO;UACfW,aAAa,EAAEV;QACjB,CAAC,CAAC,CAACW,IAAI,CAACR,OAAO,CAAC,CAACS,KAAK,CAACR,MAAM,CAAC;MAChC,CAAC,CAAC;IACJ,CAAC,CAAC;IACFR,WAAW,GAAGiB,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACC,eAAe,CAAC;MACnDC,SAAS,EAAEnB,SAAS;MACpBoB,KAAK,EAAEjB,MAAM;MACbkB,MAAM,EAAE;IACV,CAAC,CAAC;IACF,OAAO;MAAEC,KAAK,EAAE;IAAK,CAAC;EACxB,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,qCAAoCA,KAAK,CAACE,OAAQ,EAAC,CAAC;IACnE,OAAO;MAAEF;IAAM,CAAC;EAClB;AACF;AAEA,OAAO,eAAeG,KAAKA,CAAA,EAAG;EAC5B,IAAI;IACF,MAAMC,KAAK,GAAG,MAAM,IAAItB,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACnDR,WAAW,CAAC6B,QAAQ,GAAIC,QAAQ,IAAK;QACnC,IAAIA,QAAQ,CAACN,KAAK,EAAE;UAClBhB,MAAM,CAAE,iBAAgBsB,QAAQ,CAACN,KAAM,EAAC,CAAC;QAC3C,CAAC,MAAM;UACLjB,OAAO,CAACuB,QAAQ,CAAC;QACnB;MACF,CAAC;MACD9B,WAAW,CAAC+B,kBAAkB,CAAC;QAAER,MAAM,EAAE;MAAiB,CAAC,CAAC;IAC9D,CAAC,CAAC;IACF,OAAO;MAAES,IAAI,EAAEJ,KAAK;MAAEJ,KAAK,EAAE;IAAK,CAAC;EACrC,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,8CAA6CA,KAAK,CAACE,OAAQ,EAAC,CAAC;IAC5E,OAAO;MAAEF;IAAM,CAAC;EAClB;AACF;AAEA,OAAO,eAAeS,MAAMA,CAAA,EAAG;EAC7B,IAAI;IACFhB,MAAM,CAACC,QAAQ,CAACgB,EAAE,CAACC,iBAAiB,CAAC,CAAC;IACtC,OAAO;MAAEH,IAAI,EAAE,IAAI;MAAER,KAAK,EAAE;IAAK,CAAC;EACpC,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAE,wBAAuBA,KAAK,CAACE,OAAQ,EAAC,CAAC;IACtD,OAAO;MAAEM,IAAI,EAAE,IAAI;MAAER;IAAM,CAAC;EAC9B;AACF;AAGA,OAAO,SAASY,WAAWA,CAACC,WAAW,EAAE;EACvC,OAAOC,KAAK,CAACvC,gBAAgB,EAAE;IAC7BwC,OAAO,EAAE;MAAEC,aAAa,EAAG,UAASH,WAAY;IAAE;EACpD,CAAC,CAAC,CACCtB,IAAI,CAACe,QAAQ,IAAIA,QAAQ,CAACW,IAAI,CAAC,CAAC,CAAC;AACtC"},"metadata":{},"sourceType":"module","externalDependencies":[]}