{"ast":null,"code":"// Games.js\nimport React,{useEffect,useState,useCallback}from'react';import{newGame,deleteGame,listDriveGames}from'../apis/driveAPI';import Button from'@mui/material/Button';import CircularProgress from'@mui/material/CircularProgress';import Box from'@mui/material/Box';import AddIcon from'@mui/icons-material/Add';import GameCard from'../components/GameCard';import{useAppContext}from'../AppContext';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Games=()=>{const{token,appFolderID,gameList,setGameList,setGameID,updateGameList,setUpdateGameList}=useAppContext();const[loading,setLoading]=useState(false);const navigate=useNavigate();const fetchGames=useCallback(async()=>{try{setLoading(true);const newUpdatedGameList=await listDriveGames(appFolderID);setGameList(newUpdatedGameList);setUpdateGameList(false);}catch(error){console.error('Error fetching games:',error);}finally{setLoading(false);}},[appFolderID,setGameList,setUpdateGameList]);useEffect(()=>{if(updateGameList)fetchGames();},[updateGameList,fetchGames]);const handleAction=async function(action){try{setLoading(true);if(action===deleteGame){const confirmed=window.confirm('Are you sure you want to delete this game?');if(!confirmed){return setLoading(false);}}for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}await action(...args);setUpdateGameList(true);}catch(error){console.error('Error performing game operation:',error.message);}};const handleNavigation=(path,gameID)=>{setGameID(gameID);navigate(\"/\".concat(path));};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[loading&&/*#__PURE__*/_jsx(Box,{sx:{position:'fixed',width:'100%',height:'calc(100vh - 64px - 106.5px)',backgroundColor:'rgba(255, 255, 255, 0.5)',zIndex:9998,display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{size:80})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'64px 96px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',marginBottom:'48px'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleAction(newGame,appFolderID,token.access_token),disabled:loading,children:\"New Game\"})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexWrap:'wrap',gap:'16px'},children:gameList.map(game=>/*#__PURE__*/_jsx(GameCard,{game:game,handleEditGame:()=>handleNavigation('edit',game.id),handlePlayGame:()=>handleNavigation('play',game.id)// handleDuplicateGame={() => handleAction(duplicateGame, game.id)}\n,handleDeleteGame:()=>handleAction(deleteGame,game.id)},game.id))})]})]});};export default Games;","map":{"version":3,"names":["React","useEffect","useState","useCallback","newGame","deleteGame","listDriveGames","Button","CircularProgress","Box","AddIcon","GameCard","useAppContext","useNavigate","jsx","_jsx","jsxs","_jsxs","Games","token","appFolderID","gameList","setGameList","setGameID","updateGameList","setUpdateGameList","loading","setLoading","navigate","fetchGames","newUpdatedGameList","error","console","handleAction","action","confirmed","window","confirm","_len","arguments","length","args","Array","_key","message","handleNavigation","path","gameID","concat","style","position","children","sx","width","height","backgroundColor","zIndex","display","justifyContent","alignItems","size","padding","marginBottom","variant","color","startIcon","onClick","access_token","disabled","flexWrap","gap","map","game","handleEditGame","id","handlePlayGame","handleDeleteGame"],"sources":["D:/xampp/htdocs/src/pages/Games.js"],"sourcesContent":["// Games.js\r\nimport React, { useEffect, useState, useCallback } from 'react';\r\nimport { newGame, deleteGame, listDriveGames } from '../apis/driveAPI';\r\nimport Button from '@mui/material/Button';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Box from '@mui/material/Box';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport GameCard from '../components/GameCard';\r\nimport { useAppContext } from '../AppContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Games = () => {\r\n  const { token, appFolderID, gameList, setGameList, setGameID, updateGameList, setUpdateGameList } = useAppContext();\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchGames = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const newUpdatedGameList = await listDriveGames(appFolderID);\r\n      setGameList(newUpdatedGameList);\r\n      setUpdateGameList(false);\r\n    } catch (error) {\r\n      console.error('Error fetching games:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [appFolderID, setGameList, setUpdateGameList]);\r\n\r\n  useEffect(() => {\r\n    if (updateGameList) fetchGames();\r\n  }, [updateGameList, fetchGames]);\r\n\r\n  const handleAction = async (action, ...args) => {\r\n    try {\r\n      setLoading(true);\r\n      if (action === deleteGame) {\r\n        const confirmed = window.confirm('Are you sure you want to delete this game?');\r\n        if (!confirmed) {\r\n          return setLoading(false); \r\n        }\r\n      }\r\n      await action(...args);\r\n      setUpdateGameList(true);\r\n    } catch (error) {\r\n      console.error('Error performing game operation:', error.message);\r\n    }\r\n  };\r\n\r\n  const handleNavigation = (path, gameID) => {\r\n    setGameID(gameID);\r\n    navigate(`/${path}`);\r\n  };\r\n\r\n  return (\r\n    <div style={{ position: 'relative' }}>\r\n      {loading && (\r\n        <Box\r\n          sx={{\r\n            position: 'fixed',\r\n            width: '100%',\r\n            height: 'calc(100vh - 64px - 106.5px)',\r\n            backgroundColor: 'rgba(255, 255, 255, 0.5)',\r\n            zIndex: 9998,\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <CircularProgress size={80} />\r\n        </Box>\r\n      )}\r\n      <div style={{ padding: '64px 96px' }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '48px' }}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            startIcon={<AddIcon />}\r\n            onClick={() => handleAction(newGame, appFolderID, token.access_token)}\r\n            disabled={loading}\r\n          >\r\n            New Game\r\n          </Button>\r\n        </div>\r\n        <div style={{ display: 'flex', flexWrap: 'wrap', gap: '16px' }}>\r\n          {gameList.map((game) => (\r\n            <GameCard key={game.id} game={game}\r\n              handleEditGame={() => handleNavigation('edit', game.id)}\r\n              handlePlayGame={() => handleNavigation('play', game.id)}\r\n             // handleDuplicateGame={() => handleAction(duplicateGame, game.id)}\r\n              handleDeleteGame={() => handleAction(deleteGame, game.id)}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}