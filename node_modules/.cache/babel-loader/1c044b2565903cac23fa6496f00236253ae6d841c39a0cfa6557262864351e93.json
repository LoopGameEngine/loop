{"ast":null,"code":"// Play.js\nimport React,{useEffect,useRef,useCallback}from'react';import{useNavigate}from'react-router-dom';import{IconButton}from'@mui/material';import CloseIcon from'@mui/icons-material/Close';import{useAppContext}from'../AppContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Play(){const{gameID,token,API_KEY,DISCOVERY_DOCS}=useAppContext();const navigate=useNavigate();const iframeRef=useRef(null);const handleCloseEngine=useCallback(()=>{navigate('/games');},[navigate]);const handleOpenEngine=useCallback(()=>{const messageData={type:'playGame',data:{gameID,token,API_KEY,DISCOVERY_DOCS}};iframeRef.current.contentWindow.postMessage(messageData,'*');},[gameID,token,API_KEY,DISCOVERY_DOCS]);useEffect(()=>{window.addEventListener('message',event=>{if(event.data&&event.data.type===\"closeGame\"){handleCloseEngine();}});return()=>{window.removeEventListener('message',handleCloseEngine);};},[handleCloseEngine]);return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'100%',height:'calc(100vh - 64px - 105.5px)',overflow:'hidden'},children:[/*#__PURE__*/_jsx(IconButton,{style:{position:'absolute',top:'8px',right:'8px',zIndex:1,color:'white'},onClick:handleCloseEngine,children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(\"iframe\",{title:\"Game Engine\",ref:iframeRef,onLoad:handleOpenEngine,src:\"/engine/index.html\",style:{width:'100%',height:'100%',border:'none'}})]});}export default Play;","map":{"version":3,"names":["React","useEffect","useRef","useCallback","useNavigate","IconButton","CloseIcon","useAppContext","jsx","_jsx","jsxs","_jsxs","Play","gameID","token","API_KEY","DISCOVERY_DOCS","navigate","iframeRef","handleCloseEngine","handleOpenEngine","messageData","type","data","current","contentWindow","postMessage","window","addEventListener","event","removeEventListener","style","position","width","height","overflow","children","top","right","zIndex","color","onClick","title","ref","onLoad","src","border"],"sources":["D:/xampp/htdocs/src/pages/Play.js"],"sourcesContent":["// Play.js\r\nimport React, { useEffect, useRef, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { IconButton } from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { useAppContext } from '../AppContext';\r\n\r\nfunction Play() {\r\n    const { gameID, token, API_KEY, DISCOVERY_DOCS } = useAppContext();\r\n    const navigate = useNavigate();\r\n    const iframeRef = useRef(null);\r\n\r\n    const handleCloseEngine = useCallback(() => {\r\n        navigate('/games');\r\n    }, [navigate]);\r\n\r\n    const handleOpenEngine = useCallback(() => {\r\n        const messageData = {\r\n            type: 'playGame',\r\n            data: { gameID, token, API_KEY, DISCOVERY_DOCS }\r\n        };\r\n        iframeRef.current.contentWindow.postMessage(messageData, '*');\r\n    }, [gameID, token, API_KEY, DISCOVERY_DOCS]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('message', (event) => {\r\n            if (event.data && event.data.type === \"closeGame\") {\r\n                handleCloseEngine();\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            window.removeEventListener('message', handleCloseEngine);\r\n        };\r\n    }, [handleCloseEngine]);\r\n\r\n    return (\r\n        <div style={{ position: 'relative', width: '100%', height: 'calc(100vh - 64px - 105.5px)', overflow: 'hidden' }}>\r\n            <IconButton\r\n                style={{ position: 'absolute', top: '8px', right: '8px', zIndex: 1, color: 'white' }}\r\n                onClick={handleCloseEngine}\r\n            >\r\n                <CloseIcon />\r\n            </IconButton>\r\n            <iframe\r\n                title=\"Game Engine\"\r\n                ref={iframeRef}\r\n                onLoad={handleOpenEngine}\r\n                src={`/engine/index.html`}\r\n                style={{ width: '100%', height: '100%', border: 'none' }}\r\n            ></iframe>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Play;\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,WAAW,KAAQ,OAAO,CAC7D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,UAAU,KAAQ,eAAe,CAC1C,MAAO,CAAAC,SAAS,KAAM,2BAA2B,CACjD,OAASC,aAAa,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE9C,QAAS,CAAAC,IAAIA,CAAA,CAAG,CACZ,KAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,OAAO,CAAEC,cAAe,CAAC,CAAGT,aAAa,CAAC,CAAC,CAClE,KAAM,CAAAU,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAc,SAAS,CAAGhB,MAAM,CAAC,IAAI,CAAC,CAE9B,KAAM,CAAAiB,iBAAiB,CAAGhB,WAAW,CAAC,IAAM,CACxCc,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAG,gBAAgB,CAAGjB,WAAW,CAAC,IAAM,CACvC,KAAM,CAAAkB,WAAW,CAAG,CAChBC,IAAI,CAAE,UAAU,CAChBC,IAAI,CAAE,CAAEV,MAAM,CAAEC,KAAK,CAAEC,OAAO,CAAEC,cAAe,CACnD,CAAC,CACDE,SAAS,CAACM,OAAO,CAACC,aAAa,CAACC,WAAW,CAACL,WAAW,CAAE,GAAG,CAAC,CACjE,CAAC,CAAE,CAACR,MAAM,CAAEC,KAAK,CAAEC,OAAO,CAAEC,cAAc,CAAC,CAAC,CAE5Cf,SAAS,CAAC,IAAM,CACZ0B,MAAM,CAACC,gBAAgB,CAAC,SAAS,CAAGC,KAAK,EAAK,CAC1C,GAAIA,KAAK,CAACN,IAAI,EAAIM,KAAK,CAACN,IAAI,CAACD,IAAI,GAAK,WAAW,CAAE,CAC/CH,iBAAiB,CAAC,CAAC,CACvB,CACJ,CAAC,CAAC,CAEF,MAAO,IAAM,CACTQ,MAAM,CAACG,mBAAmB,CAAC,SAAS,CAAEX,iBAAiB,CAAC,CAC5D,CAAC,CACL,CAAC,CAAE,CAACA,iBAAiB,CAAC,CAAC,CAEvB,mBACIR,KAAA,QAAKoB,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,8BAA8B,CAAEC,QAAQ,CAAE,QAAS,CAAE,CAAAC,QAAA,eAC5G3B,IAAA,CAACJ,UAAU,EACP0B,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEK,GAAG,CAAE,KAAK,CAAEC,KAAK,CAAE,KAAK,CAAEC,MAAM,CAAE,CAAC,CAAEC,KAAK,CAAE,OAAQ,CAAE,CACrFC,OAAO,CAAEtB,iBAAkB,CAAAiB,QAAA,cAE3B3B,IAAA,CAACH,SAAS,GAAE,CAAC,CACL,CAAC,cACbG,IAAA,WACIiC,KAAK,CAAC,aAAa,CACnBC,GAAG,CAAEzB,SAAU,CACf0B,MAAM,CAAExB,gBAAiB,CACzByB,GAAG,qBAAuB,CAC1Bd,KAAK,CAAE,CAAEE,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAM,CAAEY,MAAM,CAAE,MAAO,CAAE,CACpD,CAAC,EACT,CAAC,CAEd,CAEA,cAAe,CAAAlC,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}