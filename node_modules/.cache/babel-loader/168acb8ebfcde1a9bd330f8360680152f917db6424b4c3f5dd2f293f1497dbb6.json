{"ast":null,"code":"// api.js\n/* global gapi, google  */\nvar CLIENT_ID = '129246923501-4lk4rkmhin21kcaoul91k300s9ar9n1t.apps.googleusercontent.com';\nvar API_KEY = 'AIzaSyCfXON-94Onk-fLyihh8buKZcFIjynGRTc';\nvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"];\nvar SCOPES = 'https://www.googleapis.com/auth/drive ';\nvar tokenClient;\nvar gapiInited = false;\nvar gisInited = false;\nvar openWindows = {};\nvar appFolderName = \"Loop Games\";\nvar appFolderID;\nvar signinButton = document.getElementsByClassName('signin')[0];\nvar signoutButton = document.getElementsByClassName('signout')[0];\nvar newgameButton = document.getElementsByClassName('newgame')[0];\nvar listcontainer = document.querySelector('.list ul');\nvar expandContainer = document.querySelector('.expand-container');\nvar expandContainerUl = document.querySelector('.expand-container ul');\nvar user;\nexport const gapiLoad = () => {\n  return new Promise(resolve => {\n    console.log(\"Loading gapi...\");\n    gapi.load('client', () => {\n      gapiInit().then(() => {\n        console.log(\"gapi loaded successfully.\");\n        resolve(); // Resuelve la promesa cuando la carga de gapi y la inicialización están completas\n      });\n    });\n  });\n};\n\nexport const gapiInit = () => {\n  return new Promise(resolve => {\n    console.log(\"Initializing gapi...\");\n    gapi.client.init({\n      apiKey: API_KEY,\n      discoveryDocs: DISCOVERY_DOCS\n    }).then(() => {\n      gapiInited = true;\n      maybeEnableButtons().then(() => {\n        console.log(\"gapi initialized successfully.\");\n        resolve(); // Resuelve la promesa después de la inicialización de gapi\n      });\n    });\n  });\n};\n\nexport const gisInit = () => {\n  return new Promise(resolve => {\n    console.log(\"Initializing gis...\");\n    tokenClient = google.accounts.oauth2.initTokenClient({\n      client_id: CLIENT_ID,\n      scope: SCOPES,\n      prompt: ''\n    });\n    gisInited = true;\n    maybeEnableButtons().then(() => {\n      console.log(\"gis initialized successfully.\");\n      resolve(); // Resuelve la promesa después de la inicialización de gis\n    });\n  });\n};\n\nexport const maybeEnableButtons = () => {\n  return new Promise(resolve => {\n    if (gapiInited && gisInited) {\n      // Asumo que signinButton es una variable de estado en React\n      // y debería ser manipulada a través del estado de React\n      // en lugar de manipular directamente el DOM en React\n      // Debes ajustar esto según cómo manejes tu estado en React\n      // signinButton.style.display = 'block';\n\n      // En lugar de manipular el estilo directamente, \n      // podrías tener una variable de estado para controlar la visibilidad del botón\n      // Por ejemplo: setSignInButtonVisible(true);\n    }\n    console.log(\"Buttons enabled.\");\n    console.log(\"Everything initialized!\");\n    resolve(); // Resuelve la promesa después de la inicialización de los botones\n  });\n};\n\nfunction signOut() {\n  google.accounts.id.disableAutoSelect();\n  listcontainer.innerHTML = '';\n  signinButton.style.display = 'block';\n  signoutButton.style.display = newgameButton.style.display = 'none';\n}\nfunction signIn() {\n  tokenClient.callback = token => {\n    console.log(token);\n    localStorage.setItem(\"token\", JSON.stringify(token));\n    const tokenExpiration = new Date().getTime() + token.expires_in * 1000;\n    localStorage.setItem('tokenExpiration', tokenExpiration);\n    signinButton.style.display = 'none';\n    signoutButton.style.display = newgameButton.style.display = 'block';\n    checkDriveFolder(appFolderName).then(function (folderId) {\n      appFolderID = folderId;\n      listDriveGames(appFolderID);\n      setInterval(checkTokenExpiration, 1000);\n    }).catch(function (error) {\n      console.error(error);\n    });\n  };\n  tokenClient.requestAccessToken({\n    prompt: ''\n  });\n}\nfunction checkTokenExpiration() {\n  const tokenExpiration = localStorage.getItem('tokenExpiration');\n  var now = new Date().getTime();\n  var timeRemaining = Math.floor((tokenExpiration - now) / 1000); // convert to seconds\n  var minutes = Math.floor(timeRemaining / 60);\n  var seconds = timeRemaining % 60;\n  document.querySelector('.title').innerHTML = \"Loop: \" + user + \" (\" + minutes + \" : \" + seconds + \")\";\n  if (timeRemaining < 0) signIn();\n}\nfunction checkDriveFolder(appFolderName) {\n  return new Promise(function (resolve, reject) {\n    gapi.client.drive.files.list({\n      q: \"name ='\" + appFolderName + \"' and trashed=false\",\n      fields: 'files(id,name,owners(displayName))'\n    }).then(function (response) {\n      var files = response.result.files;\n      user = files[0].owners[0].displayName;\n      document.querySelector('.title').innerHTML = \"Loop: \" + user;\n      if (files && files.length > 0) {\n        resolve(files[0].id);\n      } else {\n        createFolder(appFolderName, 'root').then(function (folderId) {\n          resolve(folderId);\n        }).catch(function (error) {\n          reject(new Error('Failed to create folder: ' + error.message));\n        });\n      }\n    }).catch(function (error) {\n      reject(new Error('Failed to list files: ' + error.message));\n    });\n  });\n}\nfunction listDriveGames(appFolderID) {\n  if (appFolderID) gapi.client.drive.files.list({\n    'q': `parents in \"${appFolderID}\"` // list user games\n  }).then(function (response) {\n    var files = response.result.files;\n    if (files && files.length > 0) {\n      listcontainer.innerHTML = '';\n      for (var i = files.length - 1; i >= 0; i--) {\n        listcontainer.innerHTML += `\n                <li>\n                    <span >${files[i].name}</span>\n                    <svg  gameid=\"${files[i].id}\" onclick=\"expand(this)\" xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"/></svg>\n                </li>`;\n      }\n    }\n  });\n}\n\n// api.js (continuación)\n\n// ... (código anterior)\n\nfunction expand(v) {\n  var click_position = v.getBoundingClientRect();\n  if (expandContainer.style.display === 'block') {\n    expandContainer.style.display = 'none';\n    expandContainerUl.setAttribute('data-id', '');\n  } else {\n    expandContainer.style.display = 'block';\n    expandContainer.style.left = click_position.left + window.scrollX - 120 + 'px';\n    expandContainer.style.top = click_position.top + window.scrollY + 25 + 'px';\n    expandContainerUl.setAttribute('gameid', v.getAttribute('gameid'));\n  }\n}\nfunction newGame() {\n  var gameID;\n  createFolder(\"Untitled Game\", appFolderID).then(function (folderId) {\n    gameID = folderId;\n    createEmptyJson(gameID);\n    return createEmptyImage(gameID);\n  }).then(function (imageFileId) {\n    return createFolder(\"images\", gameID);\n  }).then(function () {\n    return createFolder(\"sounds\", gameID);\n  }).then(function () {\n    listDriveGames(appFolderID);\n  }).catch(function (error) {\n    console.error(\"Failed to create game:\", error);\n  });\n}\nfunction editGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var url = \"editor/?id=\" + gameID;\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();else openWindows[url] = window.open(url, \"_blank\");\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n}\nfunction deleteMenu(event) {\n  if (!(event.target.tagName === 'svg' || event.target.tagName === 'path') && event.target !== expandContainer) {\n    expandContainer.style.display = 'none';\n    expandContainerUl.setAttribute('gameid', '');\n  }\n}\n\n// api.js (continuación y final)\n\n// ... (código anterior)\n\nfunction playGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var url = \"engine/?id=\" + gameID;\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();else openWindows[url] = window.open(url, \"_blank\");\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n}\nfunction deleteGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var gameName = document.querySelector('[gameid=\"' + gameID + '\"]').parentNode.children[0].innerHTML;\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n  var result = window.confirm('Do you want to delete the \"' + gameName + '\" game ? ');\n  if (result) {\n    var request = gapi.client.drive.files.delete({\n      'fileId': gameID\n    });\n    request.execute(function (res) {\n      console.log('File Deleted');\n      listDriveGames(appFolderID);\n    });\n  } else {\n    console.log(\"Option selected: false\");\n  }\n}\nfunction duplicateGame(menuItemHTML) {\n  var directoryId = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var request = gapi.client.drive.files.get({\n    'fileId': directoryId,\n    'fields': 'name, parents'\n  });\n  request.execute(function (res) {\n    console.log('Game Folder Retrieved');\n    var duplicateFolderName = res.name + ' - Copy';\n    var copyRequest = gapi.client.drive.files.create({\n      'resource': {\n        'name': duplicateFolderName,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': res.parents\n      }\n    });\n    copyRequest.execute(function (copyRes) {\n      console.log('Game Folder Duplicated');\n      var duplicatedDirectoryId = copyRes.id;\n      copyDirectoryContents(directoryId, duplicatedDirectoryId, duplicateFolderName);\n      expandContainer.style.display = 'none';\n      expandContainerUl.setAttribute('gameid', '');\n      listDriveGames(appFolderID);\n    });\n  });\n}\nfunction copyDirectoryContents(sourceDirectoryId, destinationDirectoryId, duplicateFolderName) {\n  var request = gapi.client.drive.files.list({\n    'q': \"'\" + sourceDirectoryId + \"' in parents\",\n    'fields': 'files(id, name, mimeType)'\n  });\n  request.execute(function (res) {\n    var files = res.files;\n    files.forEach(function (file) {\n      if (file.mimeType === 'application/vnd.google-apps.folder') {\n        duplicateSubdirectory(file.id, destinationDirectoryId);\n      } else {\n        var copyRequest = gapi.client.drive.files.copy({\n          'fileId': file.id,\n          'parents': [destinationDirectoryId]\n        });\n        copyRequest.execute(function (copyRes) {\n          console.log('File Copied: ' + copyRes.name);\n          if (copyRes.name == \"game.json\") {\n            getJson(sourceDirectoryId).then(function (originalGameJsonId) {\n              console.log('ID del archivo game.json:', originalGameJsonId);\n              changeNameInJson(copyRes.id, originalGameJsonId, duplicateFolderName);\n            }).catch(function (error) {\n              console.error(error);\n            });\n          }\n        });\n      }\n    });\n  });\n}\nfunction getJson(directoryId) {\n  var request = gapi.client.drive.files.list({\n    'q': \"name='game.json' and '\" + directoryId + \"' in parents\",\n    'fields': 'files(id)'\n  });\n  return new Promise(function (resolve, reject) {\n    request.execute(function (res) {\n      if (res.files.length > 0) {\n        var gameJsonId = res.files[0].id;\n        resolve(gameJsonId);\n      } else {\n        reject(new Error('No se encontró el archivo game.json en la carpeta original.'));\n      }\n    });\n  });\n}\nfunction changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\n  var request = gapi.client.drive.files.get({\n    'fileId': originalGameJsonId,\n    'alt': 'media'\n  });\n  request.execute(function (res) {\n    var gameJsonContent = res;\n    gameJsonContent.name = newName;\n    var updatedJsonString = JSON.stringify(gameJsonContent);\n    var updateRequest = gapi.client.request({\n      'path': '/upload/drive/v3/files/' + duplicatedDirectoryId,\n      'method': 'PATCH',\n      'params': {\n        'uploadType': 'media'\n      },\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      'body': updatedJsonString\n    });\n    updateRequest.execute(function (updateRes) {\n      console.log('Nombre del juego duplicado actualizado: ' + newName);\n    });\n  });\n}\nfunction duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\n  var request = gapi.client.drive.files.get({\n    'fileId': sourceSubdirectoryId,\n    'fields': 'name, parents'\n  });\n  request.execute(function (res) {\n    console.log('Subdirectory Retrieved');\n    var subdirectoryData = res;\n    var copyRequest = gapi.client.drive.files.create({\n      'resource': {\n        'name': subdirectoryData.name,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': [destinationParentId]\n      }\n    });\n    copyRequest.execute(function (copyRes) {\n      console.log('Subdirectory Duplicated');\n      var duplicatedSubdirectoryId = copyRes.id;\n      copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\n    });\n  });\n}\n\n// Exporta las funciones necesarias si es necesario\n\nexport { signOut, signIn, listDriveGames, expand, newGame, editGame, deleteMenu, playGame, deleteGame, duplicateGame };","map":{"version":3,"names":["CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","tokenClient","gapiInited","gisInited","openWindows","appFolderName","appFolderID","signinButton","document","getElementsByClassName","signoutButton","newgameButton","listcontainer","querySelector","expandContainer","expandContainerUl","user","gapiLoad","Promise","resolve","console","log","gapi","load","gapiInit","then","client","init","apiKey","discoveryDocs","maybeEnableButtons","gisInit","google","accounts","oauth2","initTokenClient","client_id","scope","prompt","signOut","id","disableAutoSelect","innerHTML","style","display","signIn","callback","token","localStorage","setItem","JSON","stringify","tokenExpiration","Date","getTime","expires_in","checkDriveFolder","folderId","listDriveGames","setInterval","checkTokenExpiration","catch","error","requestAccessToken","getItem","now","timeRemaining","Math","floor","minutes","seconds","reject","drive","files","list","q","fields","response","result","owners","displayName","length","createFolder","Error","message","i","name","expand","v","click_position","getBoundingClientRect","setAttribute","left","window","scrollX","top","scrollY","getAttribute","newGame","gameID","createEmptyJson","createEmptyImage","imageFileId","editGame","menuItemHTML","parentNode","url","closed","focus","open","deleteMenu","event","target","tagName","playGame","deleteGame","gameName","children","confirm","request","delete","execute","res","duplicateGame","directoryId","get","duplicateFolderName","copyRequest","create","parents","copyRes","duplicatedDirectoryId","copyDirectoryContents","sourceDirectoryId","destinationDirectoryId","forEach","file","mimeType","duplicateSubdirectory","copy","getJson","originalGameJsonId","changeNameInJson","gameJsonId","newName","gameJsonContent","updatedJsonString","updateRequest","updateRes","sourceSubdirectoryId","destinationParentId","subdirectoryData","duplicatedSubdirectoryId"],"sources":["D:/xampp/htdocs/app/src/api.js"],"sourcesContent":["// api.js\r\n/* global gapi, google  */\r\nvar CLIENT_ID = '129246923501-4lk4rkmhin21kcaoul91k300s9ar9n1t.apps.googleusercontent.com';\r\nvar API_KEY = 'AIzaSyCfXON-94Onk-fLyihh8buKZcFIjynGRTc';\r\nvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\"];\r\nvar SCOPES = 'https://www.googleapis.com/auth/drive ';\r\nvar tokenClient;\r\nvar gapiInited = false;\r\nvar gisInited = false;\r\nvar openWindows = {};\r\nvar appFolderName = \"Loop Games\";\r\nvar appFolderID;\r\nvar signinButton = document.getElementsByClassName('signin')[0];\r\nvar signoutButton = document.getElementsByClassName('signout')[0];\r\nvar newgameButton = document.getElementsByClassName('newgame')[0];\r\nvar listcontainer = document.querySelector('.list ul');\r\nvar expandContainer = document.querySelector('.expand-container');\r\nvar expandContainerUl = document.querySelector('.expand-container ul');\r\nvar user;\r\n\r\nexport const gapiLoad = () => {\r\n    return new Promise((resolve) => {\r\n      console.log(\"Loading gapi...\");\r\n      gapi.load('client', () => {\r\n        gapiInit().then(() => {\r\n          console.log(\"gapi loaded successfully.\");\r\n          resolve(); // Resuelve la promesa cuando la carga de gapi y la inicialización están completas\r\n        });\r\n      });\r\n    });\r\n  };\r\n  \r\n  export const gapiInit = () => {\r\n    return new Promise((resolve) => {\r\n      console.log(\"Initializing gapi...\");\r\n      gapi.client.init({\r\n        apiKey: API_KEY,\r\n        discoveryDocs: DISCOVERY_DOCS\r\n      }).then(() => {\r\n        gapiInited = true;\r\n        maybeEnableButtons().then(() => {\r\n          console.log(\"gapi initialized successfully.\");\r\n          resolve(); // Resuelve la promesa después de la inicialización de gapi\r\n        });\r\n      });\r\n    });\r\n  };\r\n  \r\n  export const gisInit = () => {\r\n    return new Promise((resolve) => {\r\n      console.log(\"Initializing gis...\");\r\n      tokenClient = google.accounts.oauth2.initTokenClient({\r\n        client_id: CLIENT_ID,\r\n        scope: SCOPES,\r\n        prompt: ''\r\n      });\r\n      gisInited = true;\r\n      maybeEnableButtons().then(() => {\r\n        console.log(\"gis initialized successfully.\");\r\n        resolve(); // Resuelve la promesa después de la inicialización de gis\r\n      });\r\n    });\r\n  };\r\n  \r\n  export const maybeEnableButtons = () => {\r\n    return new Promise((resolve) => {\r\n      if (gapiInited && gisInited) {\r\n        // Asumo que signinButton es una variable de estado en React\r\n        // y debería ser manipulada a través del estado de React\r\n        // en lugar de manipular directamente el DOM en React\r\n        // Debes ajustar esto según cómo manejes tu estado en React\r\n        // signinButton.style.display = 'block';\r\n        \r\n        // En lugar de manipular el estilo directamente, \r\n        // podrías tener una variable de estado para controlar la visibilidad del botón\r\n        // Por ejemplo: setSignInButtonVisible(true);\r\n      }\r\n      console.log(\"Buttons enabled.\");\r\n      console.log(\"Everything initialized!\");\r\n      resolve(); // Resuelve la promesa después de la inicialización de los botones\r\n    });\r\n  };\r\nfunction signOut() {\r\n  google.accounts.id.disableAutoSelect();\r\n  listcontainer.innerHTML = '';\r\n  signinButton.style.display = 'block';\r\n  signoutButton.style.display = newgameButton.style.display = 'none';\r\n}\r\n\r\nfunction signIn() {\r\n  tokenClient.callback = (token) => {\r\n    console.log(token);\r\n    localStorage.setItem(\"token\", JSON.stringify(token));\r\n    const tokenExpiration = new Date().getTime() + (token.expires_in * 1000);\r\n    localStorage.setItem('tokenExpiration', tokenExpiration);\r\n    signinButton.style.display = 'none';\r\n    signoutButton.style.display = newgameButton.style.display = 'block';\r\n    checkDriveFolder(appFolderName).then(function (folderId) {\r\n      appFolderID = folderId;\r\n      listDriveGames(appFolderID);\r\n      setInterval(checkTokenExpiration, 1000);\r\n    }).catch(function (error) {\r\n      console.error(error);\r\n    });\r\n  };\r\n  tokenClient.requestAccessToken({ prompt: '' });\r\n}\r\n\r\nfunction checkTokenExpiration() {\r\n  const tokenExpiration = localStorage.getItem('tokenExpiration');\r\n  var now = new Date().getTime();\r\n  var timeRemaining = Math.floor((tokenExpiration - now) / 1000); // convert to seconds\r\n  var minutes = Math.floor(timeRemaining / 60);\r\n  var seconds = timeRemaining % 60;\r\n  document.querySelector('.title').innerHTML = \"Loop: \" + user + \" (\" + minutes + \" : \" + seconds + \")\";\r\n  if (timeRemaining < 0) signIn();\r\n}\r\n\r\nfunction checkDriveFolder(appFolderName) {\r\n  return new Promise(function (resolve, reject) {\r\n    gapi.client.drive.files.list({\r\n      q: \"name ='\" + appFolderName + \"' and trashed=false\",\r\n      fields: 'files(id,name,owners(displayName))'\r\n    }).then(function (response) {\r\n      var files = response.result.files;\r\n      user = files[0].owners[0].displayName;\r\n      document.querySelector('.title').innerHTML = \"Loop: \" + user;\r\n      if (files && files.length > 0) {\r\n        resolve(files[0].id);\r\n      } else {\r\n        createFolder(appFolderName, 'root').then(function (folderId) {\r\n          resolve(folderId);\r\n        }).catch(function (error) {\r\n          reject(new Error('Failed to create folder: ' + error.message));\r\n        });\r\n      }\r\n    }).catch(function (error) {\r\n      reject(new Error('Failed to list files: ' + error.message));\r\n    });\r\n  });\r\n}\r\n\r\nfunction listDriveGames(appFolderID) {\r\n  if (appFolderID)\r\n    gapi.client.drive.files.list({\r\n      'q': `parents in \"${appFolderID}\"` // list user games\r\n    }).then(function (response) {\r\n      var files = response.result.files;\r\n      if (files && files.length > 0) {\r\n        listcontainer.innerHTML = '';\r\n        for (var i = files.length - 1; i >= 0; i--) {\r\n          listcontainer.innerHTML += `\r\n                <li>\r\n                    <span >${files[i].name}</span>\r\n                    <svg  gameid=\"${files[i].id}\" onclick=\"expand(this)\" xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"/></svg>\r\n                </li>`;\r\n        }\r\n      }\r\n    })\r\n}\r\n\r\n// api.js (continuación)\r\n\r\n// ... (código anterior)\r\n\r\nfunction expand(v) {\r\n    var click_position = v.getBoundingClientRect();\r\n    if (expandContainer.style.display === 'block') {\r\n      expandContainer.style.display = 'none';\r\n      expandContainerUl.setAttribute('data-id', '');\r\n    } else {\r\n      expandContainer.style.display = 'block';\r\n      expandContainer.style.left = (click_position.left + window.scrollX) - 120 + 'px';\r\n      expandContainer.style.top = (click_position.top + window.scrollY) + 25 + 'px';\r\n      expandContainerUl.setAttribute('gameid', v.getAttribute('gameid'));\r\n    }\r\n  }\r\n  \r\n  function newGame() {\r\n    var gameID;\r\n    createFolder(\"Untitled Game\", appFolderID).then(function (folderId) {\r\n      gameID = folderId;\r\n      createEmptyJson(gameID);\r\n      return createEmptyImage(gameID);\r\n    }).then(function (imageFileId) {\r\n      return createFolder(\"images\", gameID);\r\n    }).then(function () {\r\n      return createFolder(\"sounds\", gameID);\r\n    }).then(function () {\r\n      listDriveGames(appFolderID);\r\n    }).catch(function (error) {\r\n      console.error(\"Failed to create game:\", error);\r\n    });\r\n  }\r\n  \r\n  function editGame(menuItemHTML) {\r\n    var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n    var url = \"editor/?id=\" + gameID;\r\n    if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();\r\n    else openWindows[url] = window.open(url, \"_blank\");\r\n    expandContainer.style.display = 'none';\r\n    expandContainerUl.setAttribute('gameid', '');\r\n  }\r\n  \r\n  function deleteMenu(event) {\r\n    if (!(event.target.tagName === 'svg' || event.target.tagName === 'path') && event.target !== expandContainer) {\r\n      expandContainer.style.display = 'none';\r\n      expandContainerUl.setAttribute('gameid', '');\r\n    }\r\n  }\r\n  \r\n// api.js (continuación y final)\r\n\r\n// ... (código anterior)\r\n\r\nfunction playGame(menuItemHTML) {\r\n    var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n    var url = \"engine/?id=\" + gameID;\r\n    if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();\r\n    else openWindows[url] = window.open(url, \"_blank\");\r\n    expandContainer.style.display = 'none';\r\n    expandContainerUl.setAttribute('gameid', '');\r\n  }\r\n  \r\n  function deleteGame(menuItemHTML) {\r\n    var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n    var gameName = document.querySelector('[gameid=\"' + gameID + '\"]').parentNode.children[0].innerHTML;\r\n    expandContainer.style.display = 'none';\r\n    expandContainerUl.setAttribute('gameid', '');\r\n    var result = window.confirm('Do you want to delete the \"' + gameName + '\" game ? ');\r\n    if (result) {\r\n      var request = gapi.client.drive.files.delete({\r\n        'fileId': gameID\r\n      });\r\n      request.execute(function (res) {\r\n        console.log('File Deleted');\r\n        listDriveGames(appFolderID);\r\n      })\r\n    } else {\r\n      console.log(\"Option selected: false\");\r\n    }\r\n  }\r\n  \r\n  function duplicateGame(menuItemHTML) {\r\n    var directoryId = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n    var request = gapi.client.drive.files.get({\r\n      'fileId': directoryId,\r\n      'fields': 'name, parents'\r\n    });\r\n    request.execute(function (res) {\r\n      console.log('Game Folder Retrieved');\r\n      var duplicateFolderName = res.name + ' - Copy';\r\n      var copyRequest = gapi.client.drive.files.create({\r\n        'resource': {\r\n          'name': duplicateFolderName,\r\n          'mimeType': 'application/vnd.google-apps.folder',\r\n          'parents': res.parents\r\n        }\r\n      });\r\n      copyRequest.execute(function (copyRes) {\r\n        console.log('Game Folder Duplicated');\r\n        var duplicatedDirectoryId = copyRes.id;\r\n        copyDirectoryContents(directoryId, duplicatedDirectoryId, duplicateFolderName);\r\n        expandContainer.style.display = 'none';\r\n        expandContainerUl.setAttribute('gameid', '');\r\n        listDriveGames(appFolderID);\r\n      });\r\n    });\r\n  }\r\n  \r\n  function copyDirectoryContents(sourceDirectoryId, destinationDirectoryId, duplicateFolderName) {\r\n    var request = gapi.client.drive.files.list({\r\n      'q': \"'\" + sourceDirectoryId + \"' in parents\",\r\n      'fields': 'files(id, name, mimeType)'\r\n    });\r\n    request.execute(function (res) {\r\n      var files = res.files;\r\n      files.forEach(function (file) {\r\n        if (file.mimeType === 'application/vnd.google-apps.folder') {\r\n          duplicateSubdirectory(file.id, destinationDirectoryId);\r\n        } else {\r\n          var copyRequest = gapi.client.drive.files.copy({\r\n            'fileId': file.id,\r\n            'parents': [destinationDirectoryId]\r\n          });\r\n          copyRequest.execute(function (copyRes) {\r\n            console.log('File Copied: ' + copyRes.name);\r\n            if (copyRes.name == \"game.json\") {\r\n              getJson(sourceDirectoryId)\r\n                .then(function (originalGameJsonId) {\r\n                  console.log('ID del archivo game.json:', originalGameJsonId);\r\n                  changeNameInJson(copyRes.id, originalGameJsonId, duplicateFolderName);\r\n                })\r\n                .catch(function (error) {\r\n                  console.error(error);\r\n                });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n  \r\n  function getJson(directoryId) {\r\n    var request = gapi.client.drive.files.list({\r\n      'q': \"name='game.json' and '\" + directoryId + \"' in parents\",\r\n      'fields': 'files(id)'\r\n    });\r\n  \r\n    return new Promise(function (resolve, reject) {\r\n      request.execute(function (res) {\r\n        if (res.files.length > 0) {\r\n          var gameJsonId = res.files[0].id;\r\n          resolve(gameJsonId);\r\n        } else {\r\n          reject(new Error('No se encontró el archivo game.json en la carpeta original.'));\r\n        }\r\n      });\r\n    });\r\n  }\r\n  \r\n  function changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\r\n    var request = gapi.client.drive.files.get({\r\n      'fileId': originalGameJsonId,\r\n      'alt': 'media'\r\n    });\r\n  \r\n    request.execute(function (res) {\r\n      var gameJsonContent = res;\r\n      gameJsonContent.name = newName;\r\n  \r\n      var updatedJsonString = JSON.stringify(gameJsonContent);\r\n  \r\n      var updateRequest = gapi.client.request({\r\n        'path': '/upload/drive/v3/files/' + duplicatedDirectoryId,\r\n        'method': 'PATCH',\r\n        'params': {\r\n          'uploadType': 'media'\r\n        },\r\n        'headers': {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        'body': updatedJsonString\r\n      });\r\n  \r\n      updateRequest.execute(function (updateRes) {\r\n        console.log('Nombre del juego duplicado actualizado: ' + newName);\r\n      });\r\n    });\r\n  }\r\n  \r\n  function duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\r\n    var request = gapi.client.drive.files.get({\r\n      'fileId': sourceSubdirectoryId,\r\n      'fields': 'name, parents'\r\n    });\r\n    request.execute(function (res) {\r\n      console.log('Subdirectory Retrieved');\r\n      var subdirectoryData = res;\r\n      var copyRequest = gapi.client.drive.files.create({\r\n        'resource': {\r\n          'name': subdirectoryData.name,\r\n          'mimeType': 'application/vnd.google-apps.folder',\r\n          'parents': [destinationParentId]\r\n        }\r\n      });\r\n      copyRequest.execute(function (copyRes) {\r\n        console.log('Subdirectory Duplicated');\r\n        var duplicatedSubdirectoryId = copyRes.id;\r\n        copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\r\n      });\r\n    });\r\n  }\r\n  \r\n  // Exporta las funciones necesarias si es necesario\r\n  \r\n  export {\r\n\r\n    signOut,\r\n    signIn,\r\n    listDriveGames,\r\n    expand,\r\n    newGame,\r\n    editGame,\r\n    deleteMenu,\r\n    playGame,\r\n    deleteGame,\r\n    duplicateGame\r\n  };\r\n    \r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}