{"ast":null,"code":"//driverAPI.js\n/* global gapi, google  */\n\nvar user;\nvar listcontainer = document.querySelector('.list ul');\nvar expandContainer = document.querySelector('.expand-container');\nvar expandContainerUl = document.querySelector('.expand-container ul');\nvar openWindows = {};\nvar appFolderID;\nfunction checkDriveFolder(loopGamesFolder) {\n  return new Promise(function (resolve, reject) {\n    gapi.client.drive.files.list({\n      q: \"name ='\" + loopGamesFolder + \"' and trashed=false\",\n      fields: 'files(id,name,owners(displayName))'\n    }).then(function (response) {\n      var files = response.result.files;\n      user = files[0].owners[0].displayName;\n      if (files && files.length > 0) {\n        resolve(files[0].id);\n      } else {\n        console.log(\"el directorio no existe\");\n        createFolder(loopGamesFolder, 'root').then(function (folderId) {\n          resolve(folderId);\n        }).catch(function (error) {\n          reject(new Error('Failed to create folder: ' + error.message));\n        });\n      }\n    }).catch(function (error) {\n      reject(new Error('Failed to list files: ' + error.message));\n    });\n  });\n}\nfunction listDriveGames(appFolderID) {\n  if (appFolderID) gapi.client.drive.files.list({\n    'q': `parents in \"${appFolderID}\"` // list user games\n  }).then(function (response) {\n    var files = response.result.files;\n    if (files && files.length > 0) {\n      listcontainer.innerHTML = '';\n      for (var i = files.length - 1; i >= 0; i--) {\n        listcontainer.innerHTML += `\n                <li>\n                    <span >${files[i].name}</span>\n                    <svg  gameid=\"${files[i].id}\" onclick=\"expand(this)\" xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"/></svg>\n                </li>`;\n      }\n    }\n  });\n}\nfunction expand(v) {\n  var click_position = v.getBoundingClientRect();\n  if (expandContainer.style.display === 'block') {\n    expandContainer.style.display = 'none';\n    expandContainerUl.setAttribute('data-id', '');\n  } else {\n    expandContainer.style.display = 'block';\n    expandContainer.style.left = click_position.left + window.scrollX - 120 + 'px';\n    expandContainer.style.top = click_position.top + window.scrollY + 25 + 'px';\n    expandContainerUl.setAttribute('gameid', v.getAttribute('gameid'));\n  }\n}\nfunction newGame() {\n  var gameID;\n  createFolder(\"Untitled Game\", appFolderID).then(function (folderId) {\n    gameID = folderId;\n    createEmptyJson(gameID);\n    return createEmptyImage(gameID);\n  }).then(function (imageFileId) {\n    return createFolder(\"images\", gameID);\n  }).then(function () {\n    return createFolder(\"sounds\", gameID);\n  }).then(function () {\n    listDriveGames(appFolderID);\n  }).catch(function (error) {\n    console.error(\"Failed to create game:\", error);\n  });\n}\nfunction editGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var url = \"editor/?id=\" + gameID;\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();else openWindows[url] = window.open(url, \"_blank\");\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n}\nfunction deleteMenu(event) {\n  if (!(event.target.tagName === 'svg' || event.target.tagName === 'path') && event.target !== expandContainer) {\n    expandContainer.style.display = 'none';\n    expandContainerUl.setAttribute('gameid', '');\n  }\n}\nfunction playGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var url = \"engine/?id=\" + gameID;\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();else openWindows[url] = window.open(url, \"_blank\");\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n}\nfunction deleteGame(menuItemHTML) {\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var gameName = document.querySelector('[gameid=\"' + gameID + '\"]').parentNode.children[0].innerHTML;\n  expandContainer.style.display = 'none';\n  expandContainerUl.setAttribute('gameid', '');\n  var result = window.confirm('Do you want to delete the \"' + gameName + '\" game ? ');\n  if (result) {\n    var request = gapi.client.drive.files.delete({\n      'fileId': gameID\n    });\n    request.execute(function (res) {\n      console.log('File Deleted');\n      listDriveGames(appFolderID);\n    });\n  } else {\n    console.log(\"Option selected: false\");\n  }\n}\nfunction duplicateGame(menuItemHTML) {\n  var directoryId = menuItemHTML.parentNode.getAttribute(\"gameid\");\n  var request = gapi.client.drive.files.get({\n    'fileId': directoryId,\n    'fields': 'name, parents'\n  });\n  request.execute(function (res) {\n    console.log('Game Folder Retrieved');\n    var duplicateFolderName = res.name + ' - Copy';\n    var copyRequest = gapi.client.drive.files.create({\n      'resource': {\n        'name': duplicateFolderName,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': res.parents\n      }\n    });\n    copyRequest.execute(function (copyRes) {\n      console.log('Game Folder Duplicated');\n      var duplicatedDirectoryId = copyRes.id;\n      copyDirectoryContents(directoryId, duplicatedDirectoryId, duplicateFolderName);\n      expandContainer.style.display = 'none';\n      expandContainerUl.setAttribute('gameid', '');\n      listDriveGames(appFolderID);\n    });\n  });\n}\nfunction copyDirectoryContents(sourceDirectoryId, destinationDirectoryId, duplicateFolderName) {\n  var request = gapi.client.drive.files.list({\n    'q': \"'\" + sourceDirectoryId + \"' in parents\",\n    'fields': 'files(id, name, mimeType)'\n  });\n  request.execute(function (res) {\n    var files = res.files;\n    files.forEach(function (file) {\n      if (file.mimeType === 'application/vnd.google-apps.folder') {\n        duplicateSubdirectory(file.id, destinationDirectoryId);\n      } else {\n        var copyRequest = gapi.client.drive.files.copy({\n          'fileId': file.id,\n          'parents': [destinationDirectoryId]\n        });\n        copyRequest.execute(function (copyRes) {\n          console.log('File Copied: ' + copyRes.name);\n          if (copyRes.name == \"game.json\") {\n            getJson(sourceDirectoryId).then(function (originalGameJsonId) {\n              console.log('ID del archivo game.json:', originalGameJsonId);\n              changeNameInJson(copyRes.id, originalGameJsonId, duplicateFolderName);\n            }).catch(function (error) {\n              console.error(error);\n            });\n          }\n        });\n      }\n    });\n  });\n}\nfunction getJson(directoryId) {\n  var request = gapi.client.drive.files.list({\n    'q': \"name='game.json' and '\" + directoryId + \"' in parents\",\n    'fields': 'files(id)'\n  });\n  return new Promise(function (resolve, reject) {\n    request.execute(function (res) {\n      if (res.files.length > 0) {\n        var gameJsonId = res.files[0].id;\n        resolve(gameJsonId);\n      } else {\n        reject(new Error('No se encontró el archivo game.json en la carpeta original.'));\n      }\n    });\n  });\n}\nfunction changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\n  var request = gapi.client.drive.files.get({\n    'fileId': originalGameJsonId,\n    'alt': 'media'\n  });\n  request.execute(function (res) {\n    var gameJsonContent = res;\n    gameJsonContent.name = newName;\n    var updatedJsonString = JSON.stringify(gameJsonContent);\n    var updateRequest = gapi.client.request({\n      'path': '/upload/drive/v3/files/' + duplicatedDirectoryId,\n      'method': 'PATCH',\n      'params': {\n        'uploadType': 'media'\n      },\n      'headers': {\n        'Content-Type': 'application/json'\n      },\n      'body': updatedJsonString\n    });\n    updateRequest.execute(function (updateRes) {\n      console.log('Nombre del juego duplicado actualizado: ' + newName);\n    });\n  });\n}\nfunction duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\n  var request = gapi.client.drive.files.get({\n    'fileId': sourceSubdirectoryId,\n    'fields': 'name, parents'\n  });\n  request.execute(function (res) {\n    console.log('Subdirectory Retrieved');\n    var subdirectoryData = res;\n    var copyRequest = gapi.client.drive.files.create({\n      'resource': {\n        'name': subdirectoryData.name,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': [destinationParentId]\n      }\n    });\n    copyRequest.execute(function (copyRes) {\n      console.log('Subdirectory Duplicated');\n      var duplicatedSubdirectoryId = copyRes.id;\n      copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\n    });\n  });\n}\nfunction createFolder(folderName, parent) {\n  return new Promise(function (resolve, reject) {\n    var request = gapi.client.request({\n      path: '/drive/v3/files',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem(\"token\")).access_token\n      },\n      body: {\n        'name': folderName,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': [parent]\n      }\n    });\n    request.execute(function (response) {\n      if (response.error) {\n        reject(new Error('Failed to create folder: ' + response.error.message));\n      } else if (response.id) {\n        resolve(response.id);\n      } else {\n        reject(new Error('Failed to create folder.'));\n      }\n    });\n  });\n}\n// Exporta las funciones necesarias si es necesario\nfunction createEmptyJson(gameID) {\n  return new Promise(function (resolve, reject) {\n    var request = gapi.client.request({\n      path: '/drive/v3/files',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem(\"token\")).access_token\n      },\n      body: {\n        'name': 'game.json',\n        'mimeType': 'application/json',\n        'parents': [gameID]\n      }\n    });\n    request.execute(function (response) {\n      if (response.error) {\n        reject(new Error('Failed to create JSON file: ' + response.error.message));\n      } else if (response.id) {\n        resolve(response.id);\n      } else {\n        reject(new Error('Failed to create JSON file.'));\n      }\n    });\n  });\n}\nfunction createEmptyImage(gameID) {\n  return new Promise(function (resolve, reject) {\n    var accessToken = JSON.parse(localStorage.getItem('token')).access_token;\n    var metadata = {\n      'name': 'image.jpg',\n      'parents': [gameID]\n    };\n    // Crear una imagen en blanco de 1x1 píxeles\n    var canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    var context = canvas.getContext('2d');\n    context.fillStyle = '#ffffff'; // Color blanco\n    context.fillRect(0, 0, 1, 1);\n    canvas.toBlob(function (blob) {\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        var base64Data = reader.result.split(',')[1];\n        var boundary = '-------314159265358979323846';\n        var delimiter = '\\r\\n--' + boundary + '\\r\\n';\n        var close_delim = '\\r\\n--' + boundary + '--';\n        var multipartRequestBody = delimiter + 'Content-Type: application/json\\r\\n\\r\\n' + JSON.stringify(metadata) + delimiter + 'Content-Type: image/jpeg\\r\\n' + 'Content-Transfer-Encoding: base64\\r\\n' + '\\r\\n' + base64Data + close_delim;\n        gapi.client.request({\n          path: '/upload/drive/v3/files',\n          method: 'POST',\n          params: {\n            'uploadType': 'multipart'\n          },\n          headers: {\n            'Content-Type': 'multipart/related; boundary=\"' + boundary + '\"',\n            'Authorization': 'Bearer ' + accessToken\n          },\n          body: multipartRequestBody\n        }).then(function (response) {\n          var fileId = response.result.id;\n          resolve(fileId);\n        }).catch(function (error) {\n          reject(new Error('Failed to create image file: ' + error.result.error.message));\n        });\n      };\n      reader.readAsDataURL(blob);\n    }, 'image/jpeg');\n  });\n}\nexport { checkDriveFolder, listDriveGames, newGame, editGame, deleteMenu, playGame, deleteGame, duplicateGame };","map":{"version":3,"names":["user","listcontainer","document","querySelector","expandContainer","expandContainerUl","openWindows","appFolderID","checkDriveFolder","loopGamesFolder","Promise","resolve","reject","gapi","client","drive","files","list","q","fields","then","response","result","owners","displayName","length","id","console","log","createFolder","folderId","catch","error","Error","message","listDriveGames","innerHTML","i","name","expand","v","click_position","getBoundingClientRect","style","display","setAttribute","left","window","scrollX","top","scrollY","getAttribute","newGame","gameID","createEmptyJson","createEmptyImage","imageFileId","editGame","menuItemHTML","parentNode","url","closed","focus","open","deleteMenu","event","target","tagName","playGame","deleteGame","gameName","children","confirm","request","delete","execute","res","duplicateGame","directoryId","get","duplicateFolderName","copyRequest","create","parents","copyRes","duplicatedDirectoryId","copyDirectoryContents","sourceDirectoryId","destinationDirectoryId","forEach","file","mimeType","duplicateSubdirectory","copy","getJson","originalGameJsonId","changeNameInJson","gameJsonId","newName","gameJsonContent","updatedJsonString","JSON","stringify","updateRequest","updateRes","sourceSubdirectoryId","destinationParentId","subdirectoryData","duplicatedSubdirectoryId","folderName","parent","path","method","headers","parse","localStorage","getItem","access_token","body","accessToken","metadata","canvas","createElement","width","height","context","getContext","fillStyle","fillRect","toBlob","blob","reader","FileReader","onloadend","base64Data","split","boundary","delimiter","close_delim","multipartRequestBody","params","fileId","readAsDataURL"],"sources":["D:/xampp/htdocs/app/src/driveAPI.js"],"sourcesContent":["\r\n//driverAPI.js\r\n/* global gapi, google  */\r\n\r\nvar user;\r\nvar listcontainer = document.querySelector('.list ul');\r\nvar expandContainer = document.querySelector('.expand-container');\r\nvar expandContainerUl = document.querySelector('.expand-container ul');\r\nvar openWindows = {};\r\nvar appFolderID;\r\n\r\nfunction checkDriveFolder(loopGamesFolder) {\r\n  return new Promise(function (resolve, reject) {\r\n    gapi.client.drive.files.list({\r\n      q: \"name ='\" + loopGamesFolder + \"' and trashed=false\",\r\n      fields: 'files(id,name,owners(displayName))'\r\n    }).then(function (response) {\r\n      var files = response.result.files;\r\n      user = files[0].owners[0].displayName;\r\n      if (files && files.length > 0) {\r\n        resolve(files[0].id);\r\n      } else {\r\n        console.log(\"el directorio no existe\");\r\n        createFolder(loopGamesFolder, 'root').then(function (folderId) {\r\n          resolve(folderId);\r\n        }).catch(function (error) {\r\n          reject(new Error('Failed to create folder: ' + error.message));\r\n        });\r\n      }\r\n    }).catch(function (error) {\r\n      reject(new Error('Failed to list files: ' + error.message));\r\n    });\r\n  });\r\n}\r\n\r\nfunction listDriveGames(appFolderID) {\r\n  if (appFolderID)\r\n    gapi.client.drive.files.list({\r\n      'q': `parents in \"${appFolderID}\"` // list user games\r\n    }).then(function (response) {\r\n      var files = response.result.files;\r\n      if (files && files.length > 0) {\r\n        listcontainer.innerHTML = '';\r\n        for (var i = files.length - 1; i >= 0; i--) {\r\n          listcontainer.innerHTML += `\r\n                <li>\r\n                    <span >${files[i].name}</span>\r\n                    <svg  gameid=\"${files[i].id}\" onclick=\"expand(this)\" xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M24 24H0V0h24v24z\" fill=\"none\" opacity=\".87\"/><path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z\"/></svg>\r\n                </li>`;\r\n        }\r\n      }\r\n    })\r\n}\r\n\r\nfunction expand(v) {\r\n  var click_position = v.getBoundingClientRect();\r\n  if (expandContainer.style.display === 'block') {\r\n    expandContainer.style.display = 'none';\r\n    expandContainerUl.setAttribute('data-id', '');\r\n  } else {\r\n    expandContainer.style.display = 'block';\r\n    expandContainer.style.left = (click_position.left + window.scrollX) - 120 + 'px';\r\n    expandContainer.style.top = (click_position.top + window.scrollY) + 25 + 'px';\r\n    expandContainerUl.setAttribute('gameid', v.getAttribute('gameid'));\r\n  }\r\n}\r\n\r\nfunction newGame() {\r\n  var gameID;\r\n  createFolder(\"Untitled Game\", appFolderID).then(function (folderId) {\r\n    gameID = folderId;\r\n    createEmptyJson(gameID);\r\n    return createEmptyImage(gameID);\r\n  }).then(function (imageFileId) {\r\n    return createFolder(\"images\", gameID);\r\n  }).then(function () {\r\n    return createFolder(\"sounds\", gameID);\r\n  }).then(function () {\r\n    listDriveGames(appFolderID);\r\n  }).catch(function (error) {\r\n    console.error(\"Failed to create game:\", error);\r\n  });\r\n}\r\n\r\nfunction editGame(menuItemHTML) {\r\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n  var url = \"editor/?id=\" + gameID;\r\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();\r\n  else openWindows[url] = window.open(url, \"_blank\");\r\n  expandContainer.style.display = 'none';\r\n  expandContainerUl.setAttribute('gameid', '');\r\n}\r\n\r\nfunction deleteMenu(event) {\r\n  if (!(event.target.tagName === 'svg' || event.target.tagName === 'path') && event.target !== expandContainer) {\r\n    expandContainer.style.display = 'none';\r\n    expandContainerUl.setAttribute('gameid', '');\r\n  }\r\n}\r\n\r\nfunction playGame(menuItemHTML) {\r\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n  var url = \"engine/?id=\" + gameID;\r\n  if (openWindows[url] && !openWindows[url].closed) openWindows[url].focus();\r\n  else openWindows[url] = window.open(url, \"_blank\");\r\n  expandContainer.style.display = 'none';\r\n  expandContainerUl.setAttribute('gameid', '');\r\n}\r\n\r\nfunction deleteGame(menuItemHTML) {\r\n  var gameID = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n  var gameName = document.querySelector('[gameid=\"' + gameID + '\"]').parentNode.children[0].innerHTML;\r\n  expandContainer.style.display = 'none';\r\n  expandContainerUl.setAttribute('gameid', '');\r\n  var result = window.confirm('Do you want to delete the \"' + gameName + '\" game ? ');\r\n  if (result) {\r\n    var request = gapi.client.drive.files.delete({\r\n      'fileId': gameID\r\n    });\r\n    request.execute(function (res) {\r\n      console.log('File Deleted');\r\n      listDriveGames(appFolderID);\r\n    })\r\n  } else {\r\n    console.log(\"Option selected: false\");\r\n  }\r\n}\r\n\r\nfunction duplicateGame(menuItemHTML) {\r\n  var directoryId = menuItemHTML.parentNode.getAttribute(\"gameid\");\r\n  var request = gapi.client.drive.files.get({\r\n    'fileId': directoryId,\r\n    'fields': 'name, parents'\r\n  });\r\n  request.execute(function (res) {\r\n    console.log('Game Folder Retrieved');\r\n    var duplicateFolderName = res.name + ' - Copy';\r\n    var copyRequest = gapi.client.drive.files.create({\r\n      'resource': {\r\n        'name': duplicateFolderName,\r\n        'mimeType': 'application/vnd.google-apps.folder',\r\n        'parents': res.parents\r\n      }\r\n    });\r\n    copyRequest.execute(function (copyRes) {\r\n      console.log('Game Folder Duplicated');\r\n      var duplicatedDirectoryId = copyRes.id;\r\n      copyDirectoryContents(directoryId, duplicatedDirectoryId, duplicateFolderName);\r\n      expandContainer.style.display = 'none';\r\n      expandContainerUl.setAttribute('gameid', '');\r\n      listDriveGames(appFolderID);\r\n    });\r\n  });\r\n}\r\n\r\nfunction copyDirectoryContents(sourceDirectoryId, destinationDirectoryId, duplicateFolderName) {\r\n  var request = gapi.client.drive.files.list({\r\n    'q': \"'\" + sourceDirectoryId + \"' in parents\",\r\n    'fields': 'files(id, name, mimeType)'\r\n  });\r\n  request.execute(function (res) {\r\n    var files = res.files;\r\n    files.forEach(function (file) {\r\n      if (file.mimeType === 'application/vnd.google-apps.folder') {\r\n        duplicateSubdirectory(file.id, destinationDirectoryId);\r\n      } else {\r\n        var copyRequest = gapi.client.drive.files.copy({\r\n          'fileId': file.id,\r\n          'parents': [destinationDirectoryId]\r\n        });\r\n        copyRequest.execute(function (copyRes) {\r\n          console.log('File Copied: ' + copyRes.name);\r\n          if (copyRes.name == \"game.json\") {\r\n            getJson(sourceDirectoryId)\r\n              .then(function (originalGameJsonId) {\r\n                console.log('ID del archivo game.json:', originalGameJsonId);\r\n                changeNameInJson(copyRes.id, originalGameJsonId, duplicateFolderName);\r\n              })\r\n              .catch(function (error) {\r\n                console.error(error);\r\n              });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction getJson(directoryId) {\r\n  var request = gapi.client.drive.files.list({\r\n    'q': \"name='game.json' and '\" + directoryId + \"' in parents\",\r\n    'fields': 'files(id)'\r\n  });\r\n\r\n  return new Promise(function (resolve, reject) {\r\n    request.execute(function (res) {\r\n      if (res.files.length > 0) {\r\n        var gameJsonId = res.files[0].id;\r\n        resolve(gameJsonId);\r\n      } else {\r\n        reject(new Error('No se encontró el archivo game.json en la carpeta original.'));\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\r\n  var request = gapi.client.drive.files.get({\r\n    'fileId': originalGameJsonId,\r\n    'alt': 'media'\r\n  });\r\n\r\n  request.execute(function (res) {\r\n    var gameJsonContent = res;\r\n    gameJsonContent.name = newName;\r\n\r\n    var updatedJsonString = JSON.stringify(gameJsonContent);\r\n\r\n    var updateRequest = gapi.client.request({\r\n      'path': '/upload/drive/v3/files/' + duplicatedDirectoryId,\r\n      'method': 'PATCH',\r\n      'params': {\r\n        'uploadType': 'media'\r\n      },\r\n      'headers': {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      'body': updatedJsonString\r\n    });\r\n\r\n    updateRequest.execute(function (updateRes) {\r\n      console.log('Nombre del juego duplicado actualizado: ' + newName);\r\n    });\r\n  });\r\n}\r\n\r\nfunction duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\r\n  var request = gapi.client.drive.files.get({\r\n    'fileId': sourceSubdirectoryId,\r\n    'fields': 'name, parents'\r\n  });\r\n  request.execute(function (res) {\r\n    console.log('Subdirectory Retrieved');\r\n    var subdirectoryData = res;\r\n    var copyRequest = gapi.client.drive.files.create({\r\n      'resource': {\r\n        'name': subdirectoryData.name,\r\n        'mimeType': 'application/vnd.google-apps.folder',\r\n        'parents': [destinationParentId]\r\n      }\r\n    });\r\n    copyRequest.execute(function (copyRes) {\r\n      console.log('Subdirectory Duplicated');\r\n      var duplicatedSubdirectoryId = copyRes.id;\r\n      copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\r\n    });\r\n  });\r\n}\r\n\r\n\r\nfunction createFolder(folderName, parent) {\r\n  return new Promise(function (resolve, reject) {\r\n    var request = gapi.client.request({\r\n      path: '/drive/v3/files',\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem(\"token\")).access_token,\r\n      },\r\n      body: {\r\n        'name': folderName,\r\n        'mimeType': 'application/vnd.google-apps.folder',\r\n        'parents': [parent]\r\n      }\r\n    });\r\n    request.execute(function (response) {\r\n      if (response.error) {\r\n        reject(new Error('Failed to create folder: ' + response.error.message));\r\n      } else if (response.id) {\r\n        resolve(response.id);\r\n      } else {\r\n        reject(new Error('Failed to create folder.'));\r\n      }\r\n    });\r\n  });\r\n}\r\n// Exporta las funciones necesarias si es necesario\r\nfunction createEmptyJson(gameID) {\r\n  return new Promise(function (resolve, reject) {\r\n    var request = gapi.client.request({\r\n      path: '/drive/v3/files',\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + JSON.parse(localStorage.getItem(\"token\")).access_token,\r\n      },\r\n      body: {\r\n        'name': 'game.json',\r\n        'mimeType': 'application/json',\r\n        'parents': [gameID]\r\n      }\r\n    });\r\n    request.execute(function (response) {\r\n      if (response.error) {\r\n        reject(new Error('Failed to create JSON file: ' + response.error.message));\r\n      } else if (response.id) {\r\n        resolve(response.id);\r\n      } else {\r\n        reject(new Error('Failed to create JSON file.'));\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction createEmptyImage(gameID) {\r\n  return new Promise(function (resolve, reject) {\r\n    var accessToken = JSON.parse(localStorage.getItem('token')).access_token;\r\n\r\n    var metadata = {\r\n      'name': 'image.jpg',\r\n      'parents': [gameID]\r\n    };\r\n    // Crear una imagen en blanco de 1x1 píxeles\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var context = canvas.getContext('2d');\r\n    context.fillStyle = '#ffffff'; // Color blanco\r\n    context.fillRect(0, 0, 1, 1);\r\n    canvas.toBlob(function (blob) {\r\n      var reader = new FileReader();\r\n      reader.onloadend = function () {\r\n        var base64Data = reader.result.split(',')[1];\r\n\r\n        var boundary = '-------314159265358979323846';\r\n        var delimiter = '\\r\\n--' + boundary + '\\r\\n';\r\n        var close_delim = '\\r\\n--' + boundary + '--';\r\n\r\n        var multipartRequestBody =\r\n          delimiter +\r\n          'Content-Type: application/json\\r\\n\\r\\n' +\r\n          JSON.stringify(metadata) +\r\n          delimiter +\r\n          'Content-Type: image/jpeg\\r\\n' +\r\n          'Content-Transfer-Encoding: base64\\r\\n' +\r\n          '\\r\\n' +\r\n          base64Data +\r\n          close_delim;\r\n\r\n        gapi.client.request({\r\n          path: '/upload/drive/v3/files',\r\n          method: 'POST',\r\n          params: {\r\n            'uploadType': 'multipart'\r\n          },\r\n          headers: {\r\n            'Content-Type': 'multipart/related; boundary=\"' + boundary + '\"',\r\n            'Authorization': 'Bearer ' + accessToken\r\n          },\r\n          body: multipartRequestBody\r\n        }).then(function (response) {\r\n          var fileId = response.result.id;\r\n          resolve(fileId);\r\n        }).catch(function (error) {\r\n          reject(new Error('Failed to create image file: ' + error.result.error.message));\r\n        });\r\n      };\r\n\r\n      reader.readAsDataURL(blob);\r\n    }, 'image/jpeg');\r\n  });\r\n}\r\n\r\nexport {\r\n  checkDriveFolder,\r\n  listDriveGames,\r\n  newGame,\r\n  editGame,\r\n  deleteMenu,\r\n  playGame,\r\n  deleteGame,\r\n  duplicateGame\r\n};\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}