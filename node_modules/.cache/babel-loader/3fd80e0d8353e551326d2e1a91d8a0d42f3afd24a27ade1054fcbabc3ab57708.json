{"ast":null,"code":"// /apis/driverAPI.js\n/* global gapi */\n\nasync function folderExists(folderName, token) {\n  return new Promise((resolve, reject) => {\n    gapi.client.drive.files.list({\n      q: `name='${folderName}' and trashed=false`,\n      headers: token ? {\n        Authorization: `Bearer ${token}`\n      } : {}\n    }).then(response => {\n      if (response.result.files && response.result.files.length > 0) {\n        const folderId = response.result.files[0].id;\n        resolve(folderId);\n      } else {\n        resolve(undefined);\n      }\n    }).catch(error => {\n      console.error('Error checking folder existence:', error.message);\n      reject(error);\n    });\n  });\n}\nasync function createFolder(folderName, parent, token) {\n  return new Promise(function (resolve, reject) {\n    var request = gapi.client.request({\n      path: '/drive/v3/files',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': token ? `Bearer ${token}` : ''\n      },\n      body: {\n        'name': folderName,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': [parent]\n      }\n    });\n    request.execute(function (response) {\n      if (response.error) {\n        reject(new Error('Failed to create folder: ' + response.error.message));\n      } else if (response.id) {\n        resolve(response.id);\n      } else {\n        reject(new Error('Failed to create folder.'));\n      }\n    });\n  });\n}\nasync function listDriveGames(appFolderID, token) {\n  return new Promise(async (resolve, reject) => {\n    if (!appFolderID) {\n      resolve([]); // No hay carpeta de aplicaciones, por lo que no hay juegos que listar\n      return;\n    }\n    const files = [];\n    let pageToken = null;\n    do {\n      try {\n        const response = await gapi.client.drive.files.list({\n          q: `parents in \"${appFolderID}\"`,\n          fields: 'nextPageToken, files(id, name)',\n          headers: token ? {\n            Authorization: `Bearer ${token}`\n          } : {},\n          pageToken: pageToken\n        });\n        const gameFiles = response.result.files;\n        // Recopilar todas las solicitudes de imágenes en un array\n        const imageRequests = gameFiles.map(async file => {\n          file.imageUrl = await getImageDownloadUrl(file.id);\n          return file;\n        });\n        // Esperar a que todas las imágenes se carguen en paralelo\n        const gameFilesWithImages = await Promise.all(imageRequests);\n        // Agregar los archivos a la lista\n        files.push(...gameFilesWithImages);\n        // Actualizar el token de página para la siguiente página (si la hay)\n        pageToken = response.result.nextPageToken;\n      } catch (error) {\n        reject(new Error('Error al listar los juegos de Google Drive: ' + error.message));\n        return;\n      }\n    } while (pageToken);\n    resolve(files);\n  });\n}\nfunction getImageDownloadUrl(gameFolderID) {\n  return new Promise((resolve, reject) => {\n    gapi.client.drive.files.list({\n      'q': `name='image.jpg' and '${gameFolderID}' in parents`,\n      'fields': 'files(id)'\n    }).then(response => {\n      const files = response.result.files;\n      if (files && files.length > 0) {\n        const imageFileId = files[0].id;\n        return gapi.client.drive.files.get({\n          'fileId': imageFileId,\n          'alt': 'media'\n        });\n      } else {\n        reject(new Error('No se encontró el archivo de imagen en el directorio del juego.'));\n      }\n    }).then(res => {\n      const type = res.headers[\"Content-Type\"];\n      const blob = new Blob([new Uint8Array(res.body.length).map((_, i) => res.body.charCodeAt(i))]);\n      const objectUrl = URL.createObjectURL(blob, {\n        type\n      });\n      resolve(objectUrl);\n    }).catch(error => {\n      reject(new Error('Error obteniendo la URL de descarga de la imagen: ' + error.message));\n    });\n  });\n}\nasync function newGame(appFolderID, token) {\n  try {\n    const folderId = await createFolder(\"Untitled Game\", appFolderID, token);\n    await createFolder(\"images\", folderId, token);\n    await createFolder(\"sounds\", folderId, token);\n    await createEmptyJson(folderId, token);\n    await createEmptyImage(folderId, token);\n    const gameData = {\n      id: folderId,\n      name: \"Untitled Game\",\n      imageUrl: \"\"\n    };\n    return gameData;\n  } catch (error) {\n    console.error(\"Failed to create game:\", error);\n    throw error;\n  }\n}\nasync function duplicateGame(gameID) {\n  try {\n    const response = await gapi.client.drive.files.get({\n      // Recupera la información de la carpeta del juego\n      'fileId': gameID,\n      'fields': 'name, parents'\n    });\n    console.log('Game Folder Retrieved ', response.result.name);\n    const newGameName = `${response.result.name} - Copy`;\n    const res = await gapi.client.drive.files.create({\n      // Crea la carpeta duplicada\n      'resource': {\n        'name': newGameName,\n        'mimeType': 'application/vnd.google-apps.folder',\n        'parents': response.result.parents\n      }\n    });\n    const newGameID = res.result.id;\n    await copyDirectoryContents(gameID, newGameID, newGameName);\n    return newGameID; // Opcionalmente puedes devolver el ID del nuevo directorio\n  } catch (error) {\n    console.error('Error during game duplication:', error.message);\n    throw error;\n  }\n}\nasync function deleteGame(gameID, gameName) {\n  var result = window.confirm(`Do you want to delete the \"${gameName}\" game?`);\n  if (result) {\n    try {\n      await gapi.client.drive.files.delete({\n        'fileId': gameID\n      });\n    } catch (error) {\n      console.error('Error deleting game:', error.message);\n    }\n  } else {\n    console.log('Option selected: false');\n  }\n}\nasync function copyDirectoryContents(sourceDirectoryID, destinationDirectoryID, destinationDirectoryName) {\n  try {\n    const response = await gapi.client.drive.files.list({\n      'q': `'${sourceDirectoryID}' in parents`,\n      'fields': 'files(id, name, mimeType)'\n    });\n    const files = response.result.files;\n    for (const file of files) {\n      if (file.mimeType === 'application/vnd.google-apps.folder') {\n        // Cuando encuentre un directorio, primero crea un nuevo directorio en el destino.\n        const newDirRes = await gapi.client.drive.files.create({\n          'resource': {\n            'name': file.name,\n            'mimeType': 'application/vnd.google-apps.folder',\n            'parents': [destinationDirectoryID]\n          }\n        });\n        console.log(`Directory ${file.name} created`);\n\n        // Luego, llama recursivamente a copyDirectoryContents para copiar el contenido del subdirectorio.\n        await copyDirectoryContents(file.id, newDirRes.result.id, destinationDirectoryName);\n      } else {\n        // Si es un archivo, lo copia directamente.\n        const copyRes = await gapi.client.drive.files.copy({\n          'fileId': file.id,\n          'parents': [destinationDirectoryID]\n        });\n        console.log('File Copied:', copyRes.result.name);\n\n        // Tratamiento especial para \"game.json\", si es necesario.\n        if (copyRes.result.name === \"game.json\") {\n          // Asumiendo que changeNameInJson modifica el archivo JSON ya copiado.\n          await changeNameInJson(copyRes.result.id, destinationDirectoryName);\n        }\n      }\n    }\n  } catch (error) {\n    console.error('Error copying directory contents:', error.message);\n    throw error;\n  }\n}\n\n// async function getJson(directoryID) {\n//   try {\n//     const response = await gapi.client.drive.files.list({\n//       'q': `name='game.json' and '${directoryID}' in parents`,\n//       'fields': 'files(id)'\n//     });\n//     if (response.result.files.length > 0) {\n//       const gameJsonID = response.result.files[0].id;\n//       return gameJsonID;\n//     } else {\n//       throw new Error('No se encontró el archivo game.json en la carpeta original.');\n//     }\n//   } catch (error) {\n//     console.error('Error al buscar game.json:', error.message);\n//     throw error; // Re-lanza el error para manejo adicional si es necesario.\n//   }\n// }\n\nasync function changeNameInJson(fileId, newName) {\n  try {\n    const res = await gapi.client.drive.files.get({\n      fileId: fileId,\n      alt: 'media'\n    });\n    let gameJsonContent;\n    if (res.body) gameJsonContent = JSON.parse(res.body);else throw new Error('game.json content could not be retrieved.');\n    gameJsonContent.name = newName; // Asume que 'name' es la propiedad a cambiar.\n    const updatedJsonString = JSON.stringify(gameJsonContent);\n    await gapi.client.request({\n      path: `/upload/drive/v3/files/${fileId}`,\n      method: 'PATCH',\n      params: {\n        uploadType: 'media'\n      },\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: updatedJsonString\n    });\n    console.log('game.json updated with new name:', newName);\n  } catch (error) {\n    console.error('Error updating game.json:', error.message);\n    throw error;\n  }\n}\n\n// async function changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\n//   try {// Obtiene el contenido actual del archivo game.json\n//     const res = await gapi.client.drive.files.get({\n//       'fileId': originalGameJsonId,\n//       'alt': 'media'\n//     });\n//     if (!res.result) throw new Error('No se pudo obtener el contenido de game.json.');\n//     // Modifica el nombre dentro del contenido de game.json\n//     const gameJsonContent = res.result;\n//     gameJsonContent.name = newName;\n//     const updatedJsonString = JSON.stringify(gameJsonContent);\n//     // Actualiza el archivo game.json con el nuevo nombre\n//     await gapi.client.request({\n//       'path': `/upload/drive/v3/files/${duplicatedDirectoryId}`,\n//       'method': 'PATCH',\n//       'params': { 'uploadType': 'media' },\n//       'headers': { 'Content-Type': 'application/json' },\n//       'body': updatedJsonString\n//     });\n//     console.log('Nombre del juego duplicado actualizado: ' + newName);\n//   } catch (error) {\n//     console.error('Error al cambiar el nombre en game.json:', error.message);\n//     // Manejo adicional de errores si es necesario\n//     throw error;\n//   }\n// }\n\n// async function duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\n//   var request = gapi.client.drive.files.get({\n//     'fileId': sourceSubdirectoryId,\n//     'fields': 'name, parents'\n//   });\n//   request.execute(function (res) {\n//     console.log('Subdirectory Retrieved');\n//     var subdirectoryData = res;\n//     var copyRequest = gapi.client.drive.files.create({\n//       'resource': {\n//         'name': subdirectoryData.name,\n//         'mimeType': 'application/vnd.google-apps.folder',\n//         'parents': [destinationParentId]\n//       }\n//     });\n//     copyRequest.execute(function (copyRes) {\n//       console.log('Subdirectory Duplicated');\n//       var duplicatedSubdirectoryId = copyRes.id;\n//       copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\n//     });\n//   });\n// }\n\nasync function createEmptyJson(gameID, token) {\n  return new Promise(function (resolve, reject) {\n    var request = gapi.client.request({\n      path: '/drive/v3/files',\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: {\n        'name': 'game.json',\n        'mimeType': 'application/json',\n        'parents': [gameID]\n      }\n    });\n    request.execute(function (response) {\n      if (response.error) {\n        reject(new Error('Failed to create JSON file: ' + response.error.message));\n      } else if (response.id) {\n        resolve(response.id);\n      } else {\n        reject(new Error('Failed to create JSON file.'));\n      }\n    });\n  });\n}\nasync function createEmptyImage(gameID, token) {\n  return new Promise(function (resolve, reject) {\n    var metadata = {\n      'name': 'image.jpg',\n      'parents': [gameID]\n    };\n    // Create a blank image of 1x1 pixels\n    var canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    var context = canvas.getContext('2d');\n    context.fillStyle = '#ffffff'; // White color\n    context.fillRect(0, 0, 1, 1);\n    canvas.toBlob(function (blob) {\n      var reader = new FileReader();\n      reader.onloadend = function () {\n        var base64Data = reader.result.split(',')[1];\n        var boundary = '-------314159265358979323846';\n        var delimiter = '\\r\\n--' + boundary + '\\r\\n';\n        var close_delim = '\\r\\n--' + boundary + '--';\n        var multipartRequestBody = delimiter + 'Content-Type: application/json\\r\\n\\r\\n' + JSON.stringify(metadata) + delimiter + 'Content-Type: image/jpeg\\r\\n' + 'Content-Transfer-Encoding: base64\\r\\n' + '\\r\\n' + base64Data + close_delim;\n        gapi.client.request({\n          path: '/upload/drive/v3/files',\n          method: 'POST',\n          params: {\n            'uploadType': 'multipart'\n          },\n          headers: {\n            'Content-Type': 'multipart/related; boundary=\"' + boundary + '\"',\n            'Authorization': 'Bearer ' + token\n          },\n          body: multipartRequestBody\n        }).then(function (response) {\n          var fileId = response.result.id;\n          resolve(fileId);\n        }).catch(function (error) {\n          reject(new Error('Failed to create image file: ' + error.result.error.message));\n        });\n      };\n      reader.readAsDataURL(blob);\n    }, 'image/jpeg');\n  });\n}\nexport { folderExists, createFolder, listDriveGames, getImageDownloadUrl, newGame, deleteGame, duplicateGame };","map":{"version":3,"names":["folderExists","folderName","token","Promise","resolve","reject","gapi","client","drive","files","list","q","headers","Authorization","then","response","result","length","folderId","id","undefined","catch","error","console","message","createFolder","parent","request","path","method","body","execute","Error","listDriveGames","appFolderID","pageToken","fields","gameFiles","imageRequests","map","file","imageUrl","getImageDownloadUrl","gameFilesWithImages","all","push","nextPageToken","gameFolderID","imageFileId","get","res","type","blob","Blob","Uint8Array","_","i","charCodeAt","objectUrl","URL","createObjectURL","newGame","createEmptyJson","createEmptyImage","gameData","name","duplicateGame","gameID","log","newGameName","create","parents","newGameID","copyDirectoryContents","deleteGame","gameName","window","confirm","delete","sourceDirectoryID","destinationDirectoryID","destinationDirectoryName","mimeType","newDirRes","copyRes","copy","changeNameInJson","fileId","newName","alt","gameJsonContent","JSON","parse","updatedJsonString","stringify","params","uploadType","metadata","canvas","document","createElement","width","height","context","getContext","fillStyle","fillRect","toBlob","reader","FileReader","onloadend","base64Data","split","boundary","delimiter","close_delim","multipartRequestBody","readAsDataURL"],"sources":["D:/xampp/htdocs/src/apis/driveAPI.js"],"sourcesContent":["\r\n// /apis/driverAPI.js\r\n/* global gapi */\r\n\r\nasync function folderExists(folderName, token) {\r\n  return new Promise((resolve, reject) => {\r\n    gapi.client.drive.files.list({\r\n      q: `name='${folderName}' and trashed=false`,\r\n      headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n    }).then(response => {\r\n      if (response.result.files && response.result.files.length > 0) {\r\n        const folderId = response.result.files[0].id;\r\n        resolve(folderId);\r\n      } else {\r\n        resolve(undefined);\r\n      }\r\n    }).catch(error => {\r\n      console.error('Error checking folder existence:', error.message);\r\n      reject(error);\r\n    });\r\n  });\r\n}\r\n\r\nasync function createFolder(folderName, parent, token) {\r\n  return new Promise(function (resolve, reject) {\r\n    var request = gapi.client.request({\r\n      path: '/drive/v3/files',\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': token ? `Bearer ${token}` : ''\r\n      },\r\n      body: {\r\n        'name': folderName,\r\n        'mimeType': 'application/vnd.google-apps.folder',\r\n        'parents': [parent]\r\n      }\r\n    });\r\n    request.execute(function (response) {\r\n      if (response.error) {\r\n        reject(new Error('Failed to create folder: ' + response.error.message));\r\n      } else if (response.id) {\r\n        resolve(response.id);\r\n      } else {\r\n        reject(new Error('Failed to create folder.'));\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nasync function listDriveGames(appFolderID, token) {\r\n  return new Promise(async (resolve, reject) => {\r\n    if (!appFolderID) {\r\n      resolve([]); // No hay carpeta de aplicaciones, por lo que no hay juegos que listar\r\n      return;\r\n    }\r\n    const files = [];\r\n    let pageToken = null;\r\n    do {\r\n      try {\r\n        const response = await gapi.client.drive.files.list({\r\n          q: `parents in \"${appFolderID}\"`,\r\n          fields: 'nextPageToken, files(id, name)',\r\n          headers: token ? { Authorization: `Bearer ${token}` } : {},\r\n          pageToken: pageToken,\r\n        });\r\n        const gameFiles = response.result.files;\r\n        // Recopilar todas las solicitudes de imágenes en un array\r\n        const imageRequests = gameFiles.map(async (file) => {\r\n          file.imageUrl = await getImageDownloadUrl(file.id);\r\n          return file;\r\n        });\r\n        // Esperar a que todas las imágenes se carguen en paralelo\r\n        const gameFilesWithImages = await Promise.all(imageRequests);\r\n        // Agregar los archivos a la lista\r\n        files.push(...gameFilesWithImages);\r\n        // Actualizar el token de página para la siguiente página (si la hay)\r\n        pageToken = response.result.nextPageToken;\r\n      } catch (error) {\r\n        reject(new Error('Error al listar los juegos de Google Drive: ' + error.message));\r\n        return;\r\n      }\r\n    } while (pageToken);\r\n    resolve(files);\r\n  });\r\n}\r\n\r\nfunction getImageDownloadUrl(gameFolderID) {\r\n  return new Promise((resolve, reject) => {\r\n    gapi.client.drive.files.list({\r\n      'q': `name='image.jpg' and '${gameFolderID}' in parents`,\r\n      'fields': 'files(id)',\r\n    }).then(response => {\r\n      const files = response.result.files;\r\n      if (files && files.length > 0) {\r\n        const imageFileId = files[0].id;\r\n        return gapi.client.drive.files.get({\r\n          'fileId': imageFileId,\r\n          'alt': 'media',\r\n        });\r\n      } else {\r\n        reject(new Error('No se encontró el archivo de imagen en el directorio del juego.'));\r\n      }\r\n    }).then(res => {\r\n      const type = res.headers[\"Content-Type\"];\r\n      const blob = new Blob([new Uint8Array(res.body.length).map((_, i) => res.body.charCodeAt(i))]);\r\n      const objectUrl = URL.createObjectURL(blob, { type });\r\n      resolve(objectUrl);\r\n    }).catch(error => {\r\n      reject(new Error('Error obteniendo la URL de descarga de la imagen: ' + error.message));\r\n    });\r\n  });\r\n}\r\n\r\nasync function newGame(appFolderID, token) {\r\n  try {\r\n    const folderId = await createFolder(\"Untitled Game\", appFolderID, token);\r\n    await createFolder(\"images\", folderId, token);\r\n    await createFolder(\"sounds\", folderId, token);\r\n    await createEmptyJson(folderId, token);\r\n    await createEmptyImage(folderId, token);\r\n    const gameData = {\r\n      id: folderId,\r\n      name: \"Untitled Game\",\r\n      imageUrl: \"\"\r\n    };\r\n    return gameData;\r\n  } catch (error) {\r\n    console.error(\"Failed to create game:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function duplicateGame(gameID) {\r\n  try {\r\n    const response = await gapi.client.drive.files.get({    // Recupera la información de la carpeta del juego\r\n      'fileId': gameID,\r\n      'fields': 'name, parents'\r\n    });\r\n    console.log('Game Folder Retrieved ', response.result.name);\r\n    const newGameName = `${response.result.name} - Copy`;\r\n    const res = await gapi.client.drive.files.create({    // Crea la carpeta duplicada\r\n      'resource': {\r\n        'name': newGameName,\r\n        'mimeType': 'application/vnd.google-apps.folder',\r\n        'parents': response.result.parents\r\n      }\r\n    });\r\n    const newGameID = res.result.id;\r\n    await copyDirectoryContents(gameID, newGameID, newGameName);\r\n    return newGameID; // Opcionalmente puedes devolver el ID del nuevo directorio\r\n  } catch (error) {\r\n    console.error('Error during game duplication:', error.message);\r\n    throw error;\r\n  }\r\n}\r\n\r\nasync function deleteGame(gameID, gameName) {\r\n  var result = window.confirm(`Do you want to delete the \"${gameName}\" game?`);\r\n  if (result) {\r\n    try {\r\n      await gapi.client.drive.files.delete({\r\n        'fileId': gameID\r\n      });\r\n    } catch (error) {\r\n      console.error('Error deleting game:', error.message);\r\n    }\r\n  } else {\r\n    console.log('Option selected: false');\r\n  }\r\n}\r\n\r\nasync function copyDirectoryContents(sourceDirectoryID, destinationDirectoryID, destinationDirectoryName) {\r\n  try {\r\n    const response = await gapi.client.drive.files.list({\r\n      'q': `'${sourceDirectoryID}' in parents`,\r\n      'fields': 'files(id, name, mimeType)'\r\n    });\r\n    const files = response.result.files;\r\n\r\n    for (const file of files) {\r\n      if (file.mimeType === 'application/vnd.google-apps.folder') {\r\n        // Cuando encuentre un directorio, primero crea un nuevo directorio en el destino.\r\n        const newDirRes = await gapi.client.drive.files.create({\r\n          'resource': {\r\n            'name': file.name,\r\n            'mimeType': 'application/vnd.google-apps.folder',\r\n            'parents': [destinationDirectoryID]\r\n          }\r\n        });\r\n        console.log(`Directory ${file.name} created`);\r\n\r\n        // Luego, llama recursivamente a copyDirectoryContents para copiar el contenido del subdirectorio.\r\n        await copyDirectoryContents(file.id, newDirRes.result.id, destinationDirectoryName);\r\n      } else {\r\n        // Si es un archivo, lo copia directamente.\r\n        const copyRes = await gapi.client.drive.files.copy({\r\n          'fileId': file.id,\r\n          'parents': [destinationDirectoryID]\r\n        });\r\n        console.log('File Copied:', copyRes.result.name);\r\n\r\n        // Tratamiento especial para \"game.json\", si es necesario.\r\n        if (copyRes.result.name === \"game.json\") {\r\n          // Asumiendo que changeNameInJson modifica el archivo JSON ya copiado.\r\n          await changeNameInJson(copyRes.result.id, destinationDirectoryName);\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error('Error copying directory contents:', error.message);\r\n    throw error;\r\n  }\r\n}\r\n\r\n\r\n// async function getJson(directoryID) {\r\n//   try {\r\n//     const response = await gapi.client.drive.files.list({\r\n//       'q': `name='game.json' and '${directoryID}' in parents`,\r\n//       'fields': 'files(id)'\r\n//     });\r\n//     if (response.result.files.length > 0) {\r\n//       const gameJsonID = response.result.files[0].id;\r\n//       return gameJsonID;\r\n//     } else {\r\n//       throw new Error('No se encontró el archivo game.json en la carpeta original.');\r\n//     }\r\n//   } catch (error) {\r\n//     console.error('Error al buscar game.json:', error.message);\r\n//     throw error; // Re-lanza el error para manejo adicional si es necesario.\r\n//   }\r\n// }\r\n\r\nasync function changeNameInJson(fileId, newName) {\r\n  try {\r\n      const res = await gapi.client.drive.files.get({\r\n          fileId: fileId,\r\n          alt: 'media'\r\n      });\r\n      let gameJsonContent;\r\n      if (res.body) gameJsonContent = JSON.parse(res.body);\r\n      else  throw new Error('game.json content could not be retrieved.');\r\n      gameJsonContent.name = newName; // Asume que 'name' es la propiedad a cambiar.\r\n      const updatedJsonString = JSON.stringify(gameJsonContent);\r\n      await gapi.client.request({\r\n          path: `/upload/drive/v3/files/${fileId}`,\r\n          method: 'PATCH',\r\n          params: { uploadType: 'media' },\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: updatedJsonString\r\n      });\r\n      console.log('game.json updated with new name:', newName);\r\n  } catch (error) {\r\n      console.error('Error updating game.json:', error.message);\r\n      throw error;\r\n  }\r\n}\r\n\r\n\r\n// async function changeNameInJson(duplicatedDirectoryId, originalGameJsonId, newName) {\r\n//   try {// Obtiene el contenido actual del archivo game.json\r\n//     const res = await gapi.client.drive.files.get({\r\n//       'fileId': originalGameJsonId,\r\n//       'alt': 'media'\r\n//     });\r\n//     if (!res.result) throw new Error('No se pudo obtener el contenido de game.json.');\r\n//     // Modifica el nombre dentro del contenido de game.json\r\n//     const gameJsonContent = res.result;\r\n//     gameJsonContent.name = newName;\r\n//     const updatedJsonString = JSON.stringify(gameJsonContent);\r\n//     // Actualiza el archivo game.json con el nuevo nombre\r\n//     await gapi.client.request({\r\n//       'path': `/upload/drive/v3/files/${duplicatedDirectoryId}`,\r\n//       'method': 'PATCH',\r\n//       'params': { 'uploadType': 'media' },\r\n//       'headers': { 'Content-Type': 'application/json' },\r\n//       'body': updatedJsonString\r\n//     });\r\n//     console.log('Nombre del juego duplicado actualizado: ' + newName);\r\n//   } catch (error) {\r\n//     console.error('Error al cambiar el nombre en game.json:', error.message);\r\n//     // Manejo adicional de errores si es necesario\r\n//     throw error;\r\n//   }\r\n// }\r\n\r\n\r\n// async function duplicateSubdirectory(sourceSubdirectoryId, destinationParentId) {\r\n//   var request = gapi.client.drive.files.get({\r\n//     'fileId': sourceSubdirectoryId,\r\n//     'fields': 'name, parents'\r\n//   });\r\n//   request.execute(function (res) {\r\n//     console.log('Subdirectory Retrieved');\r\n//     var subdirectoryData = res;\r\n//     var copyRequest = gapi.client.drive.files.create({\r\n//       'resource': {\r\n//         'name': subdirectoryData.name,\r\n//         'mimeType': 'application/vnd.google-apps.folder',\r\n//         'parents': [destinationParentId]\r\n//       }\r\n//     });\r\n//     copyRequest.execute(function (copyRes) {\r\n//       console.log('Subdirectory Duplicated');\r\n//       var duplicatedSubdirectoryId = copyRes.id;\r\n//       copyDirectoryContents(sourceSubdirectoryId, duplicatedSubdirectoryId);\r\n//     });\r\n//   });\r\n// }\r\n\r\nasync function createEmptyJson(gameID, token) {\r\n  return new Promise(function (resolve, reject) {\r\n    var request = gapi.client.request({\r\n      path: '/drive/v3/files',\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer ' + token,\r\n      },\r\n      body: {\r\n        'name': 'game.json',\r\n        'mimeType': 'application/json',\r\n        'parents': [gameID]\r\n      }\r\n    });\r\n    request.execute(function (response) {\r\n      if (response.error) {\r\n        reject(new Error('Failed to create JSON file: ' + response.error.message));\r\n      } else if (response.id) {\r\n        resolve(response.id);\r\n      } else {\r\n        reject(new Error('Failed to create JSON file.'));\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nasync function createEmptyImage(gameID, token) {\r\n  return new Promise(function (resolve, reject) {\r\n    var metadata = {\r\n      'name': 'image.jpg',\r\n      'parents': [gameID]\r\n    };\r\n    // Create a blank image of 1x1 pixels\r\n    var canvas = document.createElement('canvas');\r\n    canvas.width = 1;\r\n    canvas.height = 1;\r\n    var context = canvas.getContext('2d');\r\n    context.fillStyle = '#ffffff'; // White color\r\n    context.fillRect(0, 0, 1, 1);\r\n    canvas.toBlob(function (blob) {\r\n      var reader = new FileReader();\r\n      reader.onloadend = function () {\r\n        var base64Data = reader.result.split(',')[1];\r\n\r\n        var boundary = '-------314159265358979323846';\r\n        var delimiter = '\\r\\n--' + boundary + '\\r\\n';\r\n        var close_delim = '\\r\\n--' + boundary + '--';\r\n\r\n        var multipartRequestBody =\r\n          delimiter +\r\n          'Content-Type: application/json\\r\\n\\r\\n' +\r\n          JSON.stringify(metadata) +\r\n          delimiter +\r\n          'Content-Type: image/jpeg\\r\\n' +\r\n          'Content-Transfer-Encoding: base64\\r\\n' +\r\n          '\\r\\n' +\r\n          base64Data +\r\n          close_delim;\r\n\r\n        gapi.client.request({\r\n          path: '/upload/drive/v3/files',\r\n          method: 'POST',\r\n          params: {\r\n            'uploadType': 'multipart'\r\n          },\r\n          headers: {\r\n            'Content-Type': 'multipart/related; boundary=\"' + boundary + '\"',\r\n            'Authorization': 'Bearer ' + token\r\n          },\r\n          body: multipartRequestBody\r\n        }).then(function (response) {\r\n          var fileId = response.result.id;\r\n          resolve(fileId);\r\n        }).catch(function (error) {\r\n          reject(new Error('Failed to create image file: ' + error.result.error.message));\r\n        });\r\n      };\r\n\r\n      reader.readAsDataURL(blob);\r\n    }, 'image/jpeg');\r\n  });\r\n}\r\n\r\nexport {\r\n  folderExists,\r\n  createFolder,\r\n  listDriveGames,\r\n  getImageDownloadUrl,\r\n  newGame,\r\n  deleteGame,\r\n  duplicateGame\r\n};\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}