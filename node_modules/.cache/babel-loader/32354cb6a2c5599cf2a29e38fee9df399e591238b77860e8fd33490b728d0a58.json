{"ast":null,"code":"var _jsxFileName = \"D:\\\\xampp\\\\htdocs\\\\src\\\\pages\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useAppContext } from '../context';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Editor() {\n  _s();\n  const urlParams = new URLSearchParams(window.location.search);\n  const gameID = urlParams.get('id');\n  const {\n    setSavedGameData,\n    token\n  } = useAppContext(); // Obtén el token del contexto\n  const navigate = useNavigate();\n  useEffect(() => {\n    const handleIframeMessage = event => {\n      if (event.origin !== window.location.origin) return;\n      if (event.data === 'cerrarApp') {\n        navigate('/games');\n      }\n    };\n    const handleSavedGame = event => {\n      if (event.origin !== window.location.origin) return;\n      if (event.data.type === 'game_saved') {\n        const savedGameData = event.data.data;\n        setSavedGameData(savedGameData);\n      }\n    };\n\n    // Envía el token al iframe como un mensaje\n    const iframe = document.querySelector('iframe');\n    if (iframe) {\n      iframe.contentWindow.postMessage({\n        type: 'token',\n        token\n      }, window.location.origin);\n    }\n    window.addEventListener('message', handleIframeMessage);\n    window.addEventListener('message', handleSavedGame);\n    return () => {\n      window.removeEventListener('message', handleIframeMessage);\n      window.removeEventListener('message', handleSavedGame);\n    };\n  }, [setSavedGameData, navigate, token]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh',\n      overflow: 'hidden'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n      title: \"Editor\",\n      src: `/editor?id=${gameID}`,\n      style: {\n        width: '100%',\n        height: '100%',\n        border: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(Editor, \"inpy644FcAw/M4NLTCBAc9g4y7M=\", false, function () {\n  return [useAppContext, useNavigate];\n});\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","useAppContext","useNavigate","jsxDEV","_jsxDEV","Editor","_s","urlParams","URLSearchParams","window","location","search","gameID","get","setSavedGameData","token","navigate","handleIframeMessage","event","origin","data","handleSavedGame","type","savedGameData","iframe","document","querySelector","contentWindow","postMessage","addEventListener","removeEventListener","style","width","height","overflow","children","title","src","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/xampp/htdocs/src/pages/Editor.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useAppContext } from '../context';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Editor() {\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  const gameID = urlParams.get('id');\r\n  const { setSavedGameData, token } = useAppContext(); // Obtén el token del contexto\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const handleIframeMessage = (event) => {\r\n      if (event.origin !== window.location.origin) return;\r\n      if (event.data === 'cerrarApp') {\r\n        navigate('/games');\r\n      }\r\n    };\r\n\r\n    const handleSavedGame = (event) => {\r\n      if (event.origin !== window.location.origin) return;\r\n      if (event.data.type === 'game_saved') {\r\n        const savedGameData = event.data.data;\r\n        setSavedGameData(savedGameData);\r\n      }\r\n    };\r\n\r\n    // Envía el token al iframe como un mensaje\r\n    const iframe = document.querySelector('iframe');\r\n    if (iframe) {\r\n      iframe.contentWindow.postMessage({ type: 'token', token }, window.location.origin);\r\n    }\r\n\r\n    window.addEventListener('message', handleIframeMessage);\r\n    window.addEventListener('message', handleSavedGame);\r\n\r\n    return () => {\r\n      window.removeEventListener('message', handleIframeMessage);\r\n      window.removeEventListener('message', handleSavedGame);\r\n    };\r\n  }, [setSavedGameData, navigate, token]);\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh', overflow: 'hidden' }}>\r\n      <iframe\r\n        title=\"Editor\"\r\n        src={`/editor?id=${gameID}`}\r\n        style={{ width: '100%', height: '100%', border: 'none' }}\r\n      ></iframe>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Editor;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,aAAa,QAAQ,YAAY;AAC1C,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAChB,MAAMC,SAAS,GAAG,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;EAC7D,MAAMC,MAAM,GAAGL,SAAS,CAACM,GAAG,CAAC,IAAI,CAAC;EAClC,MAAM;IAAEC,gBAAgB;IAAEC;EAAM,CAAC,GAAGd,aAAa,CAAC,CAAC,CAAC,CAAC;EACrD,MAAMe,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACd,MAAMiB,mBAAmB,GAAIC,KAAK,IAAK;MACrC,IAAIA,KAAK,CAACC,MAAM,KAAKV,MAAM,CAACC,QAAQ,CAACS,MAAM,EAAE;MAC7C,IAAID,KAAK,CAACE,IAAI,KAAK,WAAW,EAAE;QAC9BJ,QAAQ,CAAC,QAAQ,CAAC;MACpB;IACF,CAAC;IAED,MAAMK,eAAe,GAAIH,KAAK,IAAK;MACjC,IAAIA,KAAK,CAACC,MAAM,KAAKV,MAAM,CAACC,QAAQ,CAACS,MAAM,EAAE;MAC7C,IAAID,KAAK,CAACE,IAAI,CAACE,IAAI,KAAK,YAAY,EAAE;QACpC,MAAMC,aAAa,GAAGL,KAAK,CAACE,IAAI,CAACA,IAAI;QACrCN,gBAAgB,CAACS,aAAa,CAAC;MACjC;IACF,CAAC;;IAED;IACA,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IAC/C,IAAIF,MAAM,EAAE;MACVA,MAAM,CAACG,aAAa,CAACC,WAAW,CAAC;QAAEN,IAAI,EAAE,OAAO;QAAEP;MAAM,CAAC,EAAEN,MAAM,CAACC,QAAQ,CAACS,MAAM,CAAC;IACpF;IAEAV,MAAM,CAACoB,gBAAgB,CAAC,SAAS,EAAEZ,mBAAmB,CAAC;IACvDR,MAAM,CAACoB,gBAAgB,CAAC,SAAS,EAAER,eAAe,CAAC;IAEnD,OAAO,MAAM;MACXZ,MAAM,CAACqB,mBAAmB,CAAC,SAAS,EAAEb,mBAAmB,CAAC;MAC1DR,MAAM,CAACqB,mBAAmB,CAAC,SAAS,EAAET,eAAe,CAAC;IACxD,CAAC;EACH,CAAC,EAAE,CAACP,gBAAgB,EAAEE,QAAQ,EAAED,KAAK,CAAC,CAAC;EAEvC,oBACEX,OAAA;IAAK2B,KAAK,EAAE;MAAEC,KAAK,EAAE,MAAM;MAAEC,MAAM,EAAE,OAAO;MAAEC,QAAQ,EAAE;IAAS,CAAE;IAAAC,QAAA,eACjE/B,OAAA;MACEgC,KAAK,EAAC,QAAQ;MACdC,GAAG,EAAG,cAAazB,MAAO,EAAE;MAC5BmB,KAAK,EAAE;QAAEC,KAAK,EAAE,MAAM;QAAEC,MAAM,EAAE,MAAM;QAAEK,MAAM,EAAE;MAAO;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClD;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACP,CAAC;AAEV;AAACpC,EAAA,CA9CQD,MAAM;EAAA,QAGuBJ,aAAa,EAChCC,WAAW;AAAA;AAAAyC,EAAA,GAJrBtC,MAAM;AAgDf,eAAeA,MAAM;AAAC,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}